(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){e.exports=n(170)},169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"CHANGE_TASKS",function(){return j}),n.d(a,"ADD_TASK_TO_TASKS",function(){return I}),n.d(a,"REMOVE_TASK_IN_TASKS",function(){return S}),n.d(a,"CHANGE_CURRENT_TODO_TASK",function(){return A}),n.d(a,"CHANGE_CURRENT_TODO_TASK_BY_ID",function(){return w}),n.d(a,"CHECK_TASK_ITEM_IN_TASK_ITEMS_BY_TASK_ID",function(){return R}),n.d(a,"TOGGLE_TASK_ITEM_CHECKED",function(){return N}),n.d(a,"UPDATE_TASK_IN_TASKS",function(){return F}),n.d(a,"EFFECT_GET_TASK_LIST",function(){return x}),n.d(a,"EFFECT_DELETE_TASK",function(){return K}),n.d(a,"EFFECT_GET_TASK",function(){return M});var r={};n.r(r),n.d(r,"changeTasks",function(){return L}),n.d(r,"addTaskToTasks",function(){return G}),n.d(r,"removeTaskInTasks",function(){return U}),n.d(r,"changeCurrentTodoTask",function(){return D}),n.d(r,"changeCurrentTodoTaskById",function(){return $}),n.d(r,"checkTaskItemInTaskItemsByTaskId",function(){return P}),n.d(r,"toggleTaskItemPropChecked",function(){return B}),n.d(r,"updateTaskInTasks",function(){return H}),n.d(r,"effectGetTaskList",function(){return W}),n.d(r,"effectDeleteTask",function(){return z}),n.d(r,"effectGetTask",function(){return J});var c={};n.r(c),n.d(c,"SHOW_SIDE_MENU",function(){return V}),n.d(c,"HIDE_SIDE_MENU",function(){return Y}),n.d(c,"SHOW_ACCOUNT_MANAGER",function(){return q}),n.d(c,"HIDE_ACCOUNT_MANAGER",function(){return X}),n.d(c,"ADD_ONE_NOTIFICATION",function(){return Z}),n.d(c,"REMOVE_THE_TOP_NOTIFICATION",function(){return Q});var u={};n.r(u),n.d(u,"showSideMenu",function(){return ee}),n.d(u,"hideSideMenu",function(){return te}),n.d(u,"showAccountManager",function(){return ne}),n.d(u,"hideAccountManager",function(){return ae}),n.d(u,"addOneNitification",function(){return re}),n.d(u,"removeTheTopNitification",function(){return ce});var o={};n.r(o),n.d(o,"CHANGE_CURRENT_TASK",function(){return ue}),n.d(o,"ADD_TASK_ITEM_IN_CURRENT_TASK",function(){return oe}),n.d(o,"REMOVE_TASK_ITEM_IN_CURRENT_TASK",function(){return ie}),n.d(o,"SNAPSHOT_CURRENT_TASK",function(){return le}),n.d(o,"UNDO_CURRENT_TASK",function(){return se}),n.d(o,"REDO_CURRENT_TASK",function(){return de}),n.d(o,"CLEAR_FUTURE_TASKS",function(){return fe}),n.d(o,"CLEAR_EDITNG_HISTORY",function(){return Ee}),n.d(o,"EFFECT_UPDATE_TASK",function(){return ke}),n.d(o,"EFFECT_GET_TASK",function(){return me});var i={};n.r(i),n.d(i,"changeCurrentTask",function(){return Te}),n.d(i,"addTaskItemInCurrentTask",function(){return pe}),n.d(i,"removeTaskItemInCurrentTask",function(){return ge}),n.d(i,"undoCurrentTask",function(){return be}),n.d(i,"redoCurrentTask",function(){return ve}),n.d(i,"snapshotCurrentTask",function(){return Ce}),n.d(i,"clearFutureTasks",function(){return he}),n.d(i,"clearAllEdtingHistory",function(){return Oe}),n.d(i,"effectUpdateTask",function(){return ye}),n.d(i,"effectGetTask",function(){return _e});var l={};n.r(l),n.d(l,"EFFECT_CREATE_TASK",function(){return je}),n.d(l,"EFFECT_UPDATE_TASK",function(){return Ie});var s={};n.r(s),n.d(s,"createTask",function(){return Se}),n.d(s,"updateTask",function(){return Ae});var d={};n.r(d),n.d(d,"LOGIN_SUCCESS",function(){return we}),n.d(d,"LOGIN_FAIL",function(){return Re}),n.d(d,"LOGOUT",function(){return Ne}),n.d(d,"REGISTER_SUCCESS",function(){return Fe}),n.d(d,"REGISTER_FAIL",function(){return xe}),n.d(d,"EFFECT_GET_USERINFO",function(){return Ke}),n.d(d,"EFFECT_LOGIN",function(){return Me}),n.d(d,"EFFECT_REGISTER",function(){return Le});var f={};n.r(f),n.d(f,"loginSuccess",function(){return Ge}),n.d(f,"loginFail",function(){return Ue}),n.d(f,"logout",function(){return De}),n.d(f,"registerSuccess",function(){return $e}),n.d(f,"registerFail",function(){return Pe}),n.d(f,"effectGetUserInfo",function(){return Be}),n.d(f,"effectLogin",function(){return He}),n.d(f,"effectRegister",function(){return We});var E=n(15),k=n.n(E),m=n(0),T=n.n(m),p=n(17),g=n(41),b=n(48),v=n(212),C=n(213),h=n(209),O=n(108),y=n.n(O),_=n(174),j="tasks/CHANGE_TASKS",I="tasks/ADD_TASK_TO_TASKS",S="tasks/REMOVE_TASK_IN_TASKS",A="tasks/CHANGE_CURRENT_TODO_TASK",w="tasks/CHANGE_CURRENT_TODO_TASK_BY_ID",R="tasks/CHECK_TASK_ITEM_IN_TASK_ITEMS_BY_TASK_ID",N="tasks/TOGGLE_TASK_ITEM_CHECKED",F="tasks/UPDATE_TASK_IN_TASKS",x="tasks/EFFECT_GET_TASK_LIST",K="tasks/EFFECT_DELETE_TASK",M="tasks/EFFECT_GET_TASK",L=function(e){return{type:j,payload:e}},G=function(e){return{type:I,payload:e}},U=function(e){return{type:S,payload:e}},D=function(e){return{type:A,payload:e}},$=function(e){return{type:w,payload:e}},P=function(e){return{type:R,payload:e}},B=function(e){return{type:N,payload:e}},H=function(e){return{type:F,payload:e}},W=function(){return{type:x}},z=function(e){return{type:K,payload:e}},J=function(e){return{type:M,payload:e}},V="global/SHOW_SIDE_MENU",Y="global/HIDE_SIDE_MENU",q="SHOW_ACCOUNT_MANAGER",X="HIDE_ACCOUNT_MANAGER",Z="ADD_ONE_NOTIFICATION",Q="REMOVE_THE_TOP_NOTIFICATION",ee=function(){return{type:V}},te=function(){return{type:Y}},ne=function(){return{type:q}},ae=function(){return{type:X}},re=function(e){return{type:Z,payload:e}},ce=function(){return{type:Q}},ue="editingTask/CHANGE_CURRENT_TASK",oe="editingTask/ADD_TASK_ITEM_IN_CURRENT_TASK",ie="editingTask/REMOVE_TASK_ITEM_IN_CURRENT_TASK",le="editingTask/SNAPSHOT_CURRENT_TASK",se="editingTask/UNDO_CURRENT_TASK",de="editingTask/REDO_CURRENT_TASK",fe="editingTask/CLEAR_FUTURE_TASKS",Ee="editingTask/CLEAR_EDITNG_HISTORY",ke="editingtask/EFFECT_UPDATE_TASK",me="editingTask/EFFECT_GET_TASK",Te=function(e){return{type:ue,payload:e}},pe=function(e){return{type:oe,payload:e}},ge=function(e){return{type:ie,payload:e}},be=function(){return{type:se}},ve=function(){return{type:de}},Ce=function(){return{type:le}},he=function(){return{type:fe}},Oe=function(){return{type:Ee}},ye=function(e){return{type:ke,payload:e}},_e=function(e){return{type:me,payload:e}},je="EFFECT_CREATE_TASK",Ie="EFFECT_UPDATE_TASK",Se=function(e){return{type:je,payload:e}},Ae=function(e){return{type:Ie,payload:e}},we="LOGIN_SUCCESS",Re="LOGIN_FAIL",Ne="LOGOUT",Fe="REGISTER_SUCCESS",xe="REGISTER_FAIL",Ke="EFFECT_GET_USERINFO",Me="EFFECT_LOGIN",Le="EFFECT_REGISTER",Ge=function(e){return{type:we,payload:e}},Ue=function(e){return{type:Re,payload:e}},De=function(){return{type:Ne}},$e=function(e){return{type:Fe,payload:e}},Pe=function(e){return{type:xe,payload:e}},Be=function(){return{type:Ke}},He=function(e){return{type:Me,payload:e}},We=function(e){return{type:Le,payload:e}},ze="#43a047",Je="#ff5722",Ve=n(10),Ye=function(e){var t,n,a=e.$task,c=e.$tasksItemsEntity,u=e.$tasksItemsRefs,o=e.dispatch,i=e.history,l=Object(m.useMemo)(function(){return u.filter(function(e){return!c.getIn([e,"checked"])}).map(function(e){return c.get(e)})},[c,u]),s=u.size,d=s-l.size,f=s===d,E=0===s,k=Object(m.useCallback)(function(){E?i.push("/edit/".concat(a.get("id"))):f?i.push("/"):o(r.checkTaskItemInTaskItemsByTaskId(l.getIn(["0","id"])))},[a,E,f,l,i,o]);return E?(t="\u6dfb\u52a0\u4efb\u52a1\u9879",n="#f44336"):f?(t="\u5168\u90e8\u5b8c\u6210(".concat(d,"/").concat(s,")"),n=ze):(t="\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1\u9879(".concat(d,"/").concat(s,")"),n=Je),T.a.createElement(h.a,{style:{backgroundColor:n,color:"#fff",transition:"background-color 300ms"},size:"medium",fullWidth:!0,"aria-label":"add",onClick:k},t)};Ye.defaultProps={$tasksItemsRefs:new Ve.List,$tasksItemsEntity:new Ve.Map,$task:null};var qe=Object(p.b)(function(e){var t=e.get("task");return{$tasksItemsEntity:t.getIn(["currentTodoTask","items","entity"]),$tasksItemsRefs:t.getIn(["currentTodoTask","items","refs"]),$task:t.get("currentTodoTask")}},null)(Ye),Xe=n(211),Ze=Object(p.b)(function(e){var t=e.get("editingTask");return{$futureTasks:t.get("futureTasks"),$oldTasks:t.get("oldTasks")}},null)(Object(b.g)(function(e){var t=e.$futureTasks,n=e.$oldTasks,a=e.dispatch,r=0===n.size,c=0===t.size,u=Object(m.useCallback)(function(){a(i.undoCurrentTask())},[a]),o=Object(m.useCallback)(function(){a(i.redoCurrentTask())},[a]);return T.a.createElement(Xe.a,{fullWidth:!0,variant:"outlined"},T.a.createElement(h.a,{onClick:u,disabled:r},"Undo"),T.a.createElement(h.a,{onClick:o,disabled:c},"Redo"))})),Qe=n(107),et=n.n(Qe),tt=n(16),nt=n(35),at=n(114),rt=n(105),ct=Object(Ve.fromJS)({showSideMenu:!1,showAccountManager:!1,notifications:[]}),ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: ".concat(t," does not has type!"));switch(t.type){case V:return e.set("showSideMenu",!0);case Y:return e.set("showSideMenu",!1);case q:return e.set("showAccountManager",!0);case X:return e.set("showAccountManager",!1);case Z:var u=c;return e.set("notifications",e.get("notifications").push(u));case Q:return e.set("notifications",e.get("notifications").shift());default:return e}},ot=function(){var e=-1,t=Date.now().toString();return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e+=1;var a="".concat(String(Math.round(1e8*Math.random())),"-").concat(String(Math.round(1e8*Math.random()))),r="".concat(a,"-").concat(t,"-").concat(e);return 0===n.length?r:"".concat(n,"-").concat(r)}}();function it(e){return function(t){t.stopPropagation();for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return e.apply(void 0,a)}}function lt(e){e.stopPropagation()}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entity",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a={},r={},c=[];return a[t]=r,a.refs=c,e.forEach(function(e){var t=e[n];c.push(t),r[t]=e}),a}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entity",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"refs";return e[n].map(function(n){return e[t][n]})}function ft(){return localStorage.getItem("__jwt")||""}function Et(e){localStorage.setItem("__jwt",e)}var kt,mt=Object(Ve.fromJS)({tasks:st([]),currentTodoTask:null}),Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: {action} does not has type!");var u=e.get("tasks"),o=e.getIn(["tasks","entity"]),i=e.getIn(["tasks","refs"]);switch(t.type){case j:var l=c;return e.set("tasks",l);case I:var s=t.payload,f=s.get("id");return e.set("tasks",u.merge({entity:o.set(f,s),refs:i.push(f)}));case S:var E=c.get("id");return e.set("tasks",u.merge({entity:o.delete(E),refs:i.filter(function(e){return e!==E})}));case A:var k=c;return e.set("currentTodoTask",k);case w:var m=c;return e.set("currentTodoTask",e.getIn(["tasks","entity",m]));case N:var T=["currentTodoTask","items","entity",c.get("id"),"checked"];return e.setIn(T,!e.getIn(T));case R:var p=c;return e.setIn(["currentTodoTask","items","entity",p,"checked"],!0);case F:var g=c,b=g.get("id");return e.setIn(["tasks","entity",b],g);case d.LOGOUT:return e.set("tasks",e.get("tasks").merge({entity:o.clear(),refs:i.clear()}));default:return e}},pt=Object(Ve.fromJS)({currentTask:null,futureTasks:[],oldTasks:[]}),gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: {action} does not has type!");var u=e.getIn(["currentTask","items"]),o=e.getIn(["currentTask","items","entity"]),i=e.getIn(["currentTask","items","refs"]);switch(t.type){case ue:var l=c;return e.set("currentTask",l);case oe:var s=c,d=s.get("id");return e.setIn(["currentTask","items"],u.merge({entity:o.set(d,s),refs:i.push(d)}));case ie:var f=c.get("id");return e.setIn(["currentTask","items"],u.merge({entity:o.delete(f),refs:i.filter(function(e){return e!==f})}));case se:var E=e.get("oldTasks");if(0!==E.length){var k=e.get("futureTasks"),m=e.get("currentTask"),T=E.last();return e.merge({currentTask:T,futureTasks:k.push(m),oldTasks:E.pop()})}return e;case de:var p=e.get("futureTasks");if(0!==p.length){var g=e.get("oldTasks"),b=e.get("currentTask"),v=p.last();return e.merge({currentTask:v,futureTasks:p.pop(),oldTasks:g.push(b)})}return e;case le:var C=e.get("currentTask");if(null!=C){var h=e.get("oldTasks");return e.set("oldTasks",h.push(C))}return e;case fe:return e.set("futureTasks",e.get("futureTasks").clear());case Ee:return e.merge({futureTasks:e.get("futureTasks").clear(),oldTasks:e.get("oldTasks").clear()});default:return e}},bt=Object(Ve.fromJS)({hasLogin:!1,userInfo:null,isLogining:!1,isRegistering:!1}),vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: ".concat(t," does not has type!"));switch(t.type){case Me:return e.set("isLogining",!0);case Le:return e.set("isRegistering",!0);case we:var u=c;return e.merge({hasLogin:!0,isLogining:!1},u);case Re:return e.set("isLogining",!1);case Ne:return Et(""),e.merge({hasLogin:!1,userInfo:null,isLogining:!1,isRegistering:!1});case Fe:var o=c;return e.merge({hasLogin:!0,isRegistering:!1},o);case xe:return e.set("isRegistering",!1);default:return e}},Ct=Object(rt.combineReducers)({global:ut,task:Tt,editingTask:gt,user:vt}),ht=n(65),Ot=n(14),yt=n.n(Ot),_t=n(28),jt=n(8),It=n(106),St=n.n(It),At=(kt=location.host,function(){return["localhost","127.0.0.1"].some(function(e){return kt.includes(e)})});var wt=St.a.create({baseURL:At()?"http://localhost:3031/":"http://101.37.174.138/",timeout:1e3});wt.interceptors.request.use(function(e){var t=ft();if(""===t||null==t)return e;var n=e;return n.headers.Authorization="Bearer ".concat(t),n},function(e){return Promise.reject(e)}),wt.interceptors.response.use(function(e){return e},function(e){var t=e.response.data;return t.type="error",t.key=ot("error"),Promise.reject(t)});var Rt=n(37),Nt=yt.a.mark(Kt),Ft=yt.a.mark(Mt),xt=yt.a.mark(Lt);function Kt(){var e,t;return yt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(jt.b)(wt.get,"/users");case 3:return e=n.sent,t=e.data,n.next=7,Object(jt.c)(f.loginSuccess({userInfo:Object(Ve.fromJS)(t)}));case 7:n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),Et("");case 13:case"end":return n.stop()}},Nt,null,[[0,9]])}function Mt(e){var t,n,a,r,c,o,i;return yt.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,t=e.payload,l.next=4,Object(jt.b)(wt.post,"/users/login",t);case 4:return n=l.sent,a=n.data,r=a.user,c=void 0===r?null:r,o=a.token,i=Object(Rt.a)(a,["user","token"]),Et(o),l.next=10,Object(jt.c)(f.loginSuccess(Object(Ve.fromJS)(Object(_t.a)({token:o,userInfo:c},i))));case 10:return l.next=12,Object(jt.c)(u.addOneNitification({type:"success",title:"\u767b\u9646\u6210\u529f",key:ot("notifi")}));case 12:l.next=20;break;case 14:return l.prev=14,l.t0=l.catch(0),l.next=18,Object(jt.c)(f.loginFail());case 18:return l.next=20,Object(jt.c)(u.addOneNitification(l.t0));case 20:case"end":return l.stop()}},Ft,null,[[0,14]])}function Lt(e){var t,n,a,r,c,o,i;return yt.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,t=e.payload,l.next=4,Object(jt.b)(wt.post,"/users",t);case 4:return n=l.sent,a=n.data,r=a.user,c=void 0===r?null:r,o=a.token,i=Object(Rt.a)(a,["user","token"]),Et(o),l.next=10,Object(jt.c)(f.registerSuccess(Object(Ve.fromJS)(Object(_t.a)({token:o,userInfo:c},i))));case 10:return l.next=12,Object(jt.c)(u.addOneNitification({type:"success",title:"\u6ce8\u518c\u6210\u529f",message:"\u5df2\u7ecf\u4e3a\u60a8\u81ea\u52a8\u767b\u5f55\u5e94\u7528"}));case 12:l.next=20;break;case 14:return l.prev=14,l.t0=l.catch(0),l.next=18,Object(jt.c)(f.registerFail());case 18:return l.next=20,Object(jt.c)(u.addOneNitification(l.t0));case 20:case"end":return l.stop()}},xt,null,[[0,14]])}var Gt=[Object(jt.d)(d.EFFECT_GET_USERINFO,Kt),Object(jt.e)(d.EFFECT_REGISTER,Lt),Object(jt.e)(d.EFFECT_LOGIN,Mt)],Ut=yt.a.mark($t),Dt=yt.a.mark(Pt);function $t(e){var t,n,a,r,c;return yt.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(jt.b)(wt.get,"/tasks/".concat(e));case 3:return t=o.sent,n=t.data,a=n.items,r=Object(Rt.a)(n,["items"]),c=Object(Ve.fromJS)(Object(_t.a)({},r,{items:st(a)})),o.abrupt("return",c);case 10:return o.prev=10,o.t0=o.catch(0),o.next=14,Object(jt.c)(u.addOneNitification(o.t0));case 14:return o.abrupt("return",null);case 15:case"end":return o.stop()}},Ut,null,[[0,10]])}function Pt(e){var t,n,a,r,c,o,i,l,s,d;return yt.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,t=e.toJS(),n=t.items,a=Object(Rt.a)(t,["items"]),r=Object(_t.a)({},a,{items:dt(n),timestamp:Date.now()}),f.next=5,Object(jt.b)(wt.put,"/tasks/".concat(r.id),r);case 5:return c=f.sent,o=c.data,i=o.items,l=Object(Rt.a)(o,["items"]),s=Object(Ve.fromJS)(Object(_t.a)({},l,{items:st(i)})),f.abrupt("return",s);case 12:return f.prev=12,f.t0=f.catch(0),(d=f.t0.data).type="error",d.title="\u7f16\u8f91\u4efb\u52a1\u5931\u8d25",f.next=19,Object(jt.c)(u.addOneNitification(d));case 19:return f.abrupt("return",null);case 20:case"end":return f.stop()}},Dt,null,[[0,12]])}var Bt=yt.a.mark(zt),Ht=yt.a.mark(Jt),Wt=yt.a.mark(Vt);function zt(){var e,t,n;return yt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(jt.b)(wt.get,"/tasks");case 3:return e=a.sent,t=e.data,n=Object(Ve.fromJS)(st(t.map(function(e){var t=e.items,n=Object(Rt.a)(e,["items"]);return Object(_t.a)({},n,{items:Object(Ve.fromJS)(st(t))})}))),a.next=8,Object(jt.c)(r.changeTasks(n));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.error(a.t0);case 13:case"end":return a.stop()}},Bt,null,[[0,10]])}function Jt(e){var t;return yt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(jt.b)(wt.delete,"/tasks/".concat(t));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.error(n.t0);case 9:case"end":return n.stop()}},Ht,null,[[1,6]])}function Vt(e){var t,n;return yt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(jt.b)($t,t);case 3:if(null!=(n=a.sent)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(jt.c)(r.changeCurrentTodoTask(n));case 8:return a.next=10,Object(jt.c)(r.updateTaskInTasks(n));case 10:case"end":return a.stop()}},Wt)}var Yt=[Object(jt.d)(a.EFFECT_GET_TASK_LIST,zt),Object(jt.d)(a.EFFECT_DELETE_TASK,Jt),Object(jt.d)(a.EFFECT_GET_TASK,Vt)],qt=yt.a.mark(Zt),Xt=yt.a.mark(Qt);function Zt(e){var t,n;return yt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(jt.b)(Pt,t);case 3:if(null!=(n=a.sent)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(jt.c)(r.updateTaskInTasks(n));case 8:case"end":return a.stop()}},qt)}function Qt(e){var t,n;return yt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(jt.b)($t,t);case 3:if(null!=(n=a.sent)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(jt.c)(i.changeCurrentTask(n));case 8:case"end":return a.stop()}},Xt)}var en=[Object(jt.d)(o.EFFECT_UPDATE_TASK,Zt),Object(jt.d)(o.EFFECT_GET_TASK,Qt)],tn=yt.a.mark(an),nn=function(e){return new Promise(function(t){return setTimeout(t,e)})};function an(){return yt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jt.b)(nn,3e3);case 2:return e.next=4,Object(jt.c)(u.removeTheTopNitification());case 4:case"end":return e.stop()}},tn)}var rn=[Object(jt.d)(c.ADD_ONE_NOTIFICATION,an)],cn=yt.a.mark(on),un=yt.a.mark(ln);function on(e){var t,n,a,c;return yt.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=e.payload,o.next=4,Object(jt.b)(wt.post,"/tasks",t);case 4:return n=o.sent,a=n.data,c=a.items,o.next=9,Object(jt.c)(r.addTaskToTasks(Object(Ve.fromJS)(Object(_t.a)({},a,{items:st(c)}))));case 9:o.next=16;break;case 11:return o.prev=11,o.t0=o.catch(0),console.error("createTask",o.t0),o.next=16,Object(jt.c)(u.addOneNitification(o.t0));case 16:case"end":return o.stop()}},cn,null,[[0,11]])}function ln(){return yt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jt.d)(l.EFFECT_CREATE_TASK,on);case 2:return e.next=4,Object(jt.a)([].concat(Object(ht.a)(Gt),Object(ht.a)(Yt),Object(ht.a)(en),Object(ht.a)(rn)));case 4:case"end":return e.stop()}},un)}var sn,dn=ln,fn=Object(at.a)(),En=[fn],kn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||nt.c;At()?(console.log("\u6b63\u5904\u4e8edeveloment\u6a21\u5f0f"),sn=Object(nt.d)(Ct,kn(nt.a.apply(void 0,En)))):sn=Object(nt.d)(Ct,nt.a.apply(void 0,En)),fn.run(dn);var mn;mn=sn;function Tn(e){var t=e.onClick,n=e.needDoubleClick,a=e.timeout,r=function(){var e=Object(m.useState)(0),t=Object(tt.a)(e,2)[1];return Object(m.useCallback)(function(){t(function(e){return e+1})},[t])}(),c=Object(m.useRef)(null),u=Object(m.useRef)(null),o=Object(m.useCallback)(function(){if(n){c.current+=1;var e=c.current;1===e?(null!=u.current&&clearTimeout(u.current),u.current=setTimeout(function(){c.current=0,u.current=null,r()},a)):2===e&&(null!=u.current&&clearTimeout(u.current),c.current=0,t.apply(void 0,arguments)),r()}else t.apply(void 0,arguments)},[t,n,r,a]),i=1===c.current?"rgba(0, 0, 0, 0.25)":"";return T.a.createElement(_.a,{style:{backgroundColor:i,transition:"background-color 300ms linear"},onClick:o,edge:"end"},T.a.createElement(et.a,null))}Tn.defaultProps={needDoubleClick:!1,timeout:1e3};var pn=Tn,gn=function(e){var t=e.onClick;return T.a.createElement(h.a,{style:{backgroundColor:"#2196f3",color:"#fff"},size:"medium",fullWidth:!0,color:"primary","aria-label":"add",onClick:t},"\u5f00\u59cb\u4e00\u9879\u4efb\u52a1")};function bn(e){var t=e.dispatch,n=e.history,a=Object(m.useCallback)(function(){t(ee())},[t]),r=Object(m.useCallback)(function(){t(ee())},[t]),c=Object(m.useCallback)(function(){n.push("/")},[n]);return T.a.createElement(v.a,{style:{backgroundColor:"white",flex:"0 0 60px"},position:"static"},T.a.createElement(C.a,null,T.a.createElement(_.a,{edge:"start",onClick:a},T.a.createElement(y.a,null)),T.a.createElement("div",{className:"appbar-button",style:{flex:"1",padding:"0 5px"}},T.a.createElement(b.d,null,T.a.createElement(b.b,{path:"/edit/:id",component:Ze}),T.a.createElement(b.b,{path:"/todo",component:qe}),T.a.createElement(b.b,{render:function(){return T.a.createElement(gn,{onClick:r})}}))),T.a.createElement(pn,{needDoubleClick:!0,onClick:c})))}bn.defaultProps={};var vn=Object(p.b)(function(e){return{$currentTaskItems:e.getIn(["global","$currentTask","$items"])}},null)(Object(b.g)(bn)),Cn=n(72),hn=n.n(Cn),On=n(58),yn=n.n(On),_n=n(216),jn=n(217),In=n(49),Sn=n(218),An=n(219),wn=n(20),Rn=n(215),Nn=n(214);function Fn(e){var t=e.title,n=e.children,a=""===t?null:T.a.createElement(Nn.a,{component:"div",id:"nested-list-subheader"},t);return T.a.createElement("div",null,T.a.createElement(Rn.a,{style:{width:"100%"},component:"nav",subheader:a},n))}Fn.defaultProps={title:"",children:T.a.createElement("div",null,"default props")};var xn=Fn,Kn=function(e){var t=e.$task,n=e.onClickTask,a=e.onClickEditTaskButton,r=e.onClickRemoveTaskButton,c=e.isEditable;return T.a.createElement(wn.Fade,{timeout:300,key:t.get("id")},T.a.createElement(_n.a,{style:{height:"48px"},onClick:function(){return n(t)},button:!c},T.a.createElement(jn.a,{primary:t.get("title")}),c?T.a.createElement(T.a.Fragment,null,T.a.createElement(_.a,{onClick:function(e){return a(e,t)}},T.a.createElement(yn.a,null)),T.a.createElement(_.a,{onClick:function(e){return r(e,t)}},T.a.createElement(hn.a,null))):null))};function Mn(e){var t=e.onClickTask,n=e.onClickEditTaskButton,a=e.onClickRemoveTaskButton,r=e.$tasks,c=e.isEditable,u=e.onClickSwitchButton,o=Object(m.useCallback)(function(e){return function(t){t.stopPropagation();for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.apply(void 0,a)}},[]),i=T.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},T.a.createElement("div",{className:"left"},T.a.createElement(In.a,null,"\u4efb\u52a1\u5217\u8868")),T.a.createElement("div",{className:"right"},T.a.createElement(In.a,null,"\u7f16\u8f91",T.a.createElement(Sn.a,{onClick:u,checked:c,color:"primary"}))));return T.a.createElement(xn,{title:i},T.a.createElement(An.a,null),T.a.createElement(wn.TransitionGroup,null,r.map(function(e){return Kn({$task:e,isEditable:c,onClickTask:t,onClickRemoveTaskButton:o(a),onClickEditTaskButton:o(n)})})))}Mn.defaultProps={onClickTask:function(){console.log("onClickTask")},onClickRemoveTaskButton:function(){console.log("onClickRemoveTaskButton")},onClickEditTaskButton:function(){console.log("onClickEditTaskButton")},onClickSwitchButton:function(){console.log("onClickSwitchButton")},isEditable:!1};var Ln=Mn;var Gn=Object(b.g)(Object(p.b)(function(e){var t=e.get("global"),n=e.get("task");return{showSideMenu:t.get("showSideMenu"),$tasks:n.get("tasks"),hasLogin:e.getIn(["user","hasLogin"])}},null)(function(e){var t=e.$tasks,n=e.dispatch,a=e.history,c=e.hasLogin,o=t.get("entity"),i=t.get("refs"),l=Object(m.useMemo)(function(){return i.map(function(e){return o.get(e)})},[o,i]),s=function(){var e=Object(m.useState)(navigator.onLine),t=Object(tt.a)(e,2),n=t[0],a=t[1],r=Object(m.useCallback)(function(){a(!0)},[]),c=Object(m.useCallback)(function(){a(!1)},[a]);return Object(m.useEffect)(function(){return window.addEventListener("online",r),window.addEventListener("offline",c),function(){window.removeEventListener("online",r),window.removeEventListener("offline",c)}},[a,r,c]),n}(),d=Object(m.useState)(!1),f=Object(tt.a)(d,2),E=f[0],k=f[1],p=Object(m.useCallback)(function(){s&&k(function(e){return!e})},[k,s]),g=Object(m.useCallback)(function(e){n(u.hideSideMenu()),a.push("/edit/".concat(e.get("id")))},[n,a]),b=Object(m.useCallback)(function(e){n(r.effectDeleteTask(e.get("id"))),n(r.removeTaskInTasks(e))},[n]),v=Object(m.useCallback)(function(e){E||(n(u.hideSideMenu()),a.push("/todo/".concat(e.get("id"))))},[n,a,E]);return T.a.createElement(Ln,{onClickEditTaskButton:g,onClickRemoveTaskButton:b,onClickTask:v,isEditable:s&&c&&E,onClickSwitchButton:p,$tasks:l})}));function Un(e){var t=e.children;return T.a.createElement(xn,{title:"\u83dc\u5355\u9879"},T.a.createElement(An.a,null),T.a.Children.map(t,function(e,t){return T.a.createElement(_n.a,{key:t},e)}))}Un.defaultProps={children:null};var Dn=Un,$n=n(224);function Pn(e){var t=e.onEnter,n=Object(Rt.a)(e,["onEnter"]),a=Object(m.useCallback)(function(e){var n=e.keyCode;13===(void 0===n?-1:n)&&t(e)},[t]);return T.a.createElement($n.a,Object.assign({onKeyUp:a},n))}Pn.defaultProps={};var Bn=Pn;var Hn=Object(p.b)(function(e){return{hasLogin:e.getIn(["user","hasLogin"])}},null)(function(e){var t=e.dispatch,n=e.hasLogin,a=Object(m.useState)(""),r=Object(tt.a)(a,2),c=r[0],o=r[1],i=Object(m.useCallback)(function(e){return o(e.target.value)},[o]),l=Object(m.useCallback)(function(e){var n=e.target.value.trim();if(""!==n){var a={title:n,id:ot(),items:[],timestamp:Date.now()};t(s.createTask(a)),o("")}},[t,o]),d=Object(m.useCallback)(function(){t(u.hideSideMenu()),t(u.showAccountManager())},[t]);return T.a.createElement(Dn,null,T.a.createElement(Bn,{label:n?"\u521b\u5efa\u65b0\u4efb\u52a1":"\u8bf7\u5148\u767b\u5f55",disabled:!n,onEnter:l,onChange:i,type:"text",value:c,margin:"normal",variant:"outlined",fullWidth:!0}),T.a.createElement(h.a,{fullWidth:!0,variant:"outlined",style:{backgroundColor:n?ze:Je,color:"#fff"},onClick:d},n?"\u5df2\u767b\u5f55":"\u767b\u5f55|\u4e91\u540c\u6b65"))});function Wn(e){var t=e.show,n=e.children;return T.a.createElement(wn.Slide,{show:t,direction:"right"},T.a.createElement("div",{style:{position:"absolute",width:"65%",maxWidth:"375px",height:"100vh",backgroundColor:"#fff",overflowY:"scroll",overflowX:"hidden",opacity:"1",zIndex:"3000"},className:"transition-slide-right-self"},n))}Wn.defaultProps={show:!0,children:""};var zn=Wn;function Jn(e){var t=e.show,n=e.onClick;return T.a.createElement(wn.Fade,{show:t},T.a.createElement("div",{onClick:n,role:"button",style:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)",top:"0",left:"0",height:"100vh",width:"100%",zIndex:"2000"},className:"transition-fade-self"}))}Jn.defaultProps={onClick:function(){console.log("Mask:onClick")}};var Vn=Jn;var Yn=Object(p.b)(function(e){return{showSideMenu:e.getIn(["global","showSideMenu"])}},null)(function(e){var t=e.dispatch,n=e.showSideMenu,a=Object(m.useCallback)(function(){t(te())},[t]);return T.a.createElement(T.a.Fragment,null,T.a.createElement(Vn,{show:n,onClick:a}),T.a.createElement(zn,{show:n},T.a.createElement(Gn,null),T.a.createElement(Hn,null)))});function qn(e){var t=e.message,n=e.time,a=Object(m.useState)(!1),r=Object(tt.a)(a,2),c=r[0],u=r[1],o=Object(m.useState)(0),i=Object(tt.a)(o,2),l=i[0],s=i[1];return Object(m.useEffect)(function(){var e=setTimeout(function(){u(!0)},n),t=setInterval(function(){s(function(e){return e+1})},1e3);return function(){clearTimeout(e),clearInterval(t)}},[n,u,s]),c?T.a.createElement(b.a,{to:"/"}):T.a.createElement("div",{style:{padding:"20px"}},T.a.createElement("h1",null,t),T.a.createElement("h2",null,Math.round(n/1e3)-l,"\u79d2\u540e\u56de\u5230\u4e3b\u9875"))}qn.defaultProps={message:"404 Not Found",time:3e3};var Xn=qn,Zn=n(226);function Qn(e){return T.a.createElement(Zn.a,e)}Qn.defaultProps={onClick:null,checked:!1,disabled:!1};var ea=Qn;function ta(e){var t=e.$taskItem,n=e.onClick,a=e.style,r=Object(m.useCallback)(function(){return n(t)},[t,n]);return T.a.createElement(_n.a,{style:a,button:!0,onClick:r},T.a.createElement(ea,{edge:"start",checked:t.get("checked")}),T.a.createElement(jn.a,{primary:t.get("title")}))}function na(e){var t=e.match.params.id,n=e.history,a=e.$currentTodoTask,c=e.dispatch;Object(m.useEffect)(function(){return c(r.effectGetTask(t)),function(){c(r.changeCurrentTodoTask(null))}},[c,t]);var u=Object(m.useMemo)(function(){var e=[],t=[];null!=a&&a.getIn(["items","refs"]).forEach(function(n){a.getIn(["items","entity",n]).get("checked")?t.push(n):e.push(n)});return[e,t]},[a]),o=Object(tt.a)(u,2),i=o[0],l=o[1],s=Object(m.useCallback)(function(e){c(r.toggleTaskItemPropChecked(e))},[c]),d=Object(m.useCallback)(function(){n.push("/edit/".concat(a.get("id")))},[n,a]);return null==a?T.a.createElement(Xn,{message:"Loding...",time:5e3}):T.a.createElement(T.a.Fragment,null,T.a.createElement(Rn.a,null,T.a.createElement(_n.a,{dense:!0},T.a.createElement(In.a,{variant:"h4",gutterBottom:!0},a.get("title")),T.a.createElement(_.a,{onClick:d},T.a.createElement(yn.a,null)))),T.a.createElement(An.a,{variant:"fullWidth"}),T.a.createElement(Rn.a,null,0===i.length?null:T.a.createElement(_n.a,{dense:!0},T.a.createElement(In.a,{variant:"subtitle1",gutterBottom:!0},"\u5f85\u5b8c\u6210")),T.a.createElement(wn.TransitionGroup,null,0===i.length?null:i.map(function(e){var t=a.getIn(["items","entity",e]);return T.a.createElement(wn.Slide,{timeout:500,direction:"right",key:t.get("id")},T.a.createElement("div",null,T.a.createElement(ta,{onClick:s,$taskItem:t}),T.a.createElement(An.a,{variant:"middle"})))}))),T.a.createElement(Rn.a,null,0===l.length?null:T.a.createElement(_n.a,{dense:!0},T.a.createElement(In.a,{variant:"subtitle1",gutterBottom:!0},"\u5df2\u5b8c\u6210")),T.a.createElement(wn.TransitionGroup,null,l.map(function(e){var t=a.getIn(["items","entity",e]);return T.a.createElement(wn.Slide,{timeout:500,direction:"right",key:t.get("id")},T.a.createElement("div",null,T.a.createElement(ta,{style:{opacity:"0.5"},onClick:s,$taskItem:t}),T.a.createElement(An.a,{variant:"middle"})))}))))}ta.defaultProps={style:null},na.defaultProps={$currentTodoTask:null};var aa=Object(b.g)(Object(p.b)(function(e){var t=e.get("global"),n=e.get("task");return{showSideMenu:t.get("showSideMenu"),$tasksEntity:n.getIn(["tasks","entity"]),$currentTodoTask:n.get("currentTodoTask")}},null)(na)),ra=n(109),ca=n.n(ra);function ua(e){var t=e.onClickTask,n=e.$tasks,a=e.onClickIconButton,r=Object(m.useMemo)(function(){return it(a)},[a]);return T.a.createElement(xn,{title:"\u7f6e\u9876\u4efb\u52a1"},T.a.createElement(An.a,null),T.a.createElement(wn.TransitionGroup,null,n.map(function(e){return T.a.createElement(wn.Fade,{show:!0,key:e.get("id"),timeout:300},T.a.createElement("div",null,T.a.createElement(_n.a,{onClick:function(){return t(e)},button:!0},T.a.createElement(jn.a,{primary:e.get("title")}),T.a.createElement(_.a,{onClick:function(t){return r(t,e)}},T.a.createElement(ca.a,null)))))})))}ua.defaultProps={onClickTask:function(){console.log("onClickTask")},onClickIconButton:function(){console.log("onClickIconButton")}};var oa=ua,ia=n(110),la=n.n(ia);function sa(e){var t=e.onClickTask,n=e.$tasks,a=e.onClickIconButton,r=Object(m.useMemo)(function(){return it(a)},[a]);return T.a.createElement(xn,{title:"\u6700\u8fd1\u4efb\u52a1"},T.a.createElement(An.a,null),n.map(function(e){return T.a.createElement(T.a.Fragment,{key:e.get("id")},T.a.createElement(_n.a,{onClick:function(){return t(e)},button:!0},T.a.createElement(jn.a,{primary:e.get("title")}),e.get("isPinned")?null:T.a.createElement(_.a,{onClick:function(t){return r(t,e)}},T.a.createElement(la.a,null))))}))}sa.defaultProps={onClickTask:function(){console.log("onClickTask")},onClickIconButton:function(){console.log("onClickIconButton")}};var da=sa;function fa(e){var t=e.$tasksRefs,n=e.dispatch,a=e.history,r=e.$tasksEntity,c=Object(m.useMemo)(function(){return t.map(function(e){return r.get(e)}).sort(function(e,t){var n=e.get("lastVisitTime")||0;return(t.get("lastVisitTime")||0)-n})},[t,r]),u=Object(m.useMemo)(function(){return t.map(function(e){return r.get(e)}).filter(function(e){return e.get("isPinned")})},[t,r]),o=Object(m.useCallback)(function(e){var t=e.set("isPinned",!0);n(i.effectUpdateTask(t))},[n]),l=Object(m.useCallback)(function(e){var t=e.set("isPinned",!1);n(i.effectUpdateTask(t))},[n]),s=Object(m.useCallback)(function(e){a.push("/todo/".concat(e.get("id")))},[a]);return T.a.createElement(T.a.Fragment,null,T.a.createElement(oa,{onClickIconButton:l,onClickTask:s,$tasks:u}),T.a.createElement(da,{onClickIconButton:o,onClickTask:s,$tasks:c}))}fa.defaultProps={};var Ea=Object(p.b)(function(e){var t=e.get("task");return{$recentTaskIds:t.get("recentTaskIds"),$pinnedTaskIds:t.get("pinnedTaskIds"),$tasksEntity:t.getIn(["tasks","entity"]),$tasksRefs:t.getIn(["tasks","refs"])}},null)(fa),ka=n(220);function ma(e){var t=e.$task,n=e.onCreateNewTaskItem,a=e.onClickRemoveButton,r=e.isEditable,c=e.onClickEditButton,u=Object(m.useState)(""),o=Object(tt.a)(u,2),i=o[0],l=o[1],s=Object(m.useCallback)(function(e){l(e.target.value)},[]),d=Object(m.useCallback)(function(e){var t=e.keyCode,a=void 0===t?-1:t,r=e.target.value;0!==r.length&&13===a&&(n(Object(Ve.Map)({id:ot(),title:r,checked:!1})),l(""))},[l,n]),f=Object(m.useCallback)(function(){c(t.get("id"))},[t,c]);return T.a.createElement(Rn.a,null,T.a.createElement(_n.a,{dense:!0},T.a.createElement(In.a,{variant:"h4",gutterBottom:!0},t.get("title")),r?null:T.a.createElement(_.a,{onClick:f},T.a.createElement(yn.a,null))),T.a.createElement(wn.TransitionGroup,null,t.getIn(["items","refs"]).map(function(e){var n=t.getIn(["items","entity",e]);return T.a.createElement(wn.Fade,{key:n.get("id"),timeout:600},T.a.createElement("div",null,T.a.createElement(_n.a,null,T.a.createElement(ea,{disabled:r,edge:"start",checked:n.get("checked")}),T.a.createElement(jn.a,{primary:n.get("title")}),r?T.a.createElement(_.a,{onClick:function(){return a(n)}},T.a.createElement(hn.a,null)):null),T.a.createElement(An.a,{variant:"middle"})))})),r?T.a.createElement(_n.a,null,T.a.createElement(ka.a,{value:i,onKeyUp:d,onChange:s,placeholder:"\u65b0\u589e\u5f85\u505a\u4e8b\u9879",fullWidth:!0})):null)}ma.defaultProps={onCreateNewTaskItem:function(){console.log("onCreateNewTaskItem")},onClickRemoveButton:function(){console.log("onCreateNewTaskItem")},onClickCheckbox:function(){console.log("onClickCheckbox")},onClickEditButton:function(){console.log("onClickEditButton")},isEditable:!1};var Ta=ma;function pa(e){var t=e.match.params.id,n=e.dispatch,a=e.$currentEditingTask,c=Object(m.useState)(!1),u=Object(tt.a)(c,2),o=u[0],l=u[1],s=Object(m.useState)(!1),d=Object(tt.a)(s,2),f=d[0],E=d[1];Object(m.useEffect)(function(){o||(n(i.effectGetTask(t)),null!=a&&l(!0))},[n,t,o,l,a]),Object(m.useEffect)(function(){return function(){n(i.clearAllEdtingHistory()),n(i.changeCurrentTask(null))}},[t,n]),Object(m.useEffect)(function(){o&&f&&(n(i.effectUpdateTask(a)),n(r.updateTaskInTasks(a)))},[o,f,n,a]);var k=Object(m.useCallback)(function(e){n(i.snapshotCurrentTask()),n(i.addTaskItemInCurrentTask(e)),n(i.clearFutureTasks()),E(!0)},[n]),p=Object(m.useCallback)(function(e){n(i.snapshotCurrentTask()),n(i.removeTaskItemInCurrentTask(e)),E(!0)},[n]);return null==a?T.a.createElement(Xn,{message:"Loding..."}):T.a.createElement(Ta,{onCreateNewTaskItem:k,onClickRemoveButton:p,$task:a,isEditable:!0})}pa.defaultProps={$currentEditingTask:null};var ga=Object(p.b)(function(e){var t=e.get("global"),n=e.get("task"),a=e.get("editingTask");return{showSideMenu:t.get("showSideMenu"),$tasksEntity:n.getIn(["tasks","entity"]),$currentEditingTask:a.get("currentTask")}},null)(pa),ba=n(115),va=n(225),Ca=n(221);function ha(e){var t=T.a.useState(""),n=Object(tt.a)(t,2),a=n[0],r=n[1],c=T.a.useState(""),u=Object(tt.a)(c,2),o=u[0],i=u[1],l=Object(m.useCallback)(function(e){return r(e.target.value)},[r]),s=Object(m.useCallback)(function(e){return i(e.target.value)},[i]),d=e.onLogin,f=e.disabled,E=Object(m.useCallback)(function(){d({username:a,password:o})},[a,o,d]),k=f||""===a.trim()||""===o.trim(),p=f?"\u767b\u5f55\u4e2d...":"\u767b\u5f55";return T.a.createElement(Rn.a,null,T.a.createElement(_n.a,null,T.a.createElement($n.a,{value:a,onChange:l,type:"text",label:"\u7528\u6237\u540d",fullWidth:!0})),T.a.createElement(_n.a,null,T.a.createElement(Bn,{onEnter:E,value:o,onChange:s,type:"password",label:"\u5bc6\u7801",fullWidth:!0})),T.a.createElement(_n.a,null,T.a.createElement(h.a,{disabled:k,variant:"outlined",onClick:E,fullWidth:!0},p)))}ha.defaultProps={disabled:!1};var Oa=ha;function ya(e){var t=T.a.useState(""),n=Object(tt.a)(t,2),a=n[0],r=n[1],c=T.a.useState(""),u=Object(tt.a)(c,2),o=u[0],i=u[1],l=Object(m.useCallback)(function(e){return r(e.target.value)},[r]),s=Object(m.useCallback)(function(e){return i(e.target.value)},[i]),d=e.onRegister,f=e.disabled,E=Object(m.useCallback)(function(){d({username:a,password:o})},[a,o,d]),k=f||""===a.trim()||""===o.trim();return T.a.createElement(Rn.a,null,T.a.createElement(_n.a,null,T.a.createElement($n.a,{placeholder:"\u8bf7\u8f93\u51654\u523016\u4f4d\u5b57\u6bcd\uff0c\u6570\u5b57",value:a,onChange:l,type:"text",label:"\u7528\u6237\u540d",fullWidth:!0})),T.a.createElement(_n.a,null,T.a.createElement(Bn,{onEnter:E,placeholder:"\u8bf7\u8f93\u51654\u523016\u4f4d\u5b57\u6bcd\uff0c\u6570\u5b57",value:o,onChange:s,type:"text",label:"\u5bc6\u7801",fullWidth:!0})),T.a.createElement(_n.a,null,T.a.createElement(h.a,{disabled:k,variant:"outlined",onClick:E,fullWidth:!0},"\u6ce8\u518c")))}ya.defaultProps={disabled:!1};var _a=ya;function ja(e){var t=e.$userInfo;return T.a.createElement(Rn.a,null,T.a.createElement(_n.a,null,"\u5df2\u7ecf\u767b\u5f55\uff0c\u6b22\u8fce\u60a8!"),T.a.createElement(_n.a,null,"\u7528\u6237\u540d: ".concat(t.get("username"))))}ja.defaultProps={};var Ia=ja,Sa=/^[a-zA-Z0-9_-]{4,16}$/,Aa=/^[a-zA-Z0-9_-]{4,16}$/;function wa(e){var t=e.dispatch,n=e.showAccountManager,a=e.hasLogin,r=e.$userInfo,c=e.isLogining,o=e.isRegistering,i=Object(m.useState)(0),l=Object(tt.a)(i,2),s=l[0],d=l[1],E=Object(m.useCallback)(function(){t(u.hideAccountManager())},[t]),k=Object(m.useCallback)(function(e,t){d(t)},[]),p=Object(m.useCallback)(function(e){var n=e.username,a=void 0===n?"":n,r=e.password,c=void 0===r?"":r;Sa.test(a)&&Aa.test(c)?t(f.effectLogin(e)):t(u.addOneNitification({type:"error",title:"\u767b\u5f55\u5931\u8d25",detail:"\u975e\u6cd5\u7528\u6237\u540d\u6216\u5bc6\u7801\uff0c\u8bf7\u8f93\u51654\u523016\u4f4d\u7684\u5b57\u6bcd\u6216\u6570\u5b57",key:ot("notify")}))},[t]),g=Object(m.useCallback)(function(e){var n=e.username,a=void 0===n?"":n,r=e.password,c=void 0===r?"":r;Sa.test(a)&&Aa.test(c)?t(f.effectRegister(e)):t(u.addOneNitification({type:"error",title:"\u6ce8\u518c\u5931\u8d25",detail:"\u975e\u6cd5\u7528\u6237\u540d\u6216\u5bc6\u7801\uff0c\u8bf7\u8f93\u51654\u523016\u4f4d\u7684\u5b57\u6bcd\u6216\u6570\u5b57",key:ot("notify")}))},[t]),b=Object(m.useCallback)(function(){t(f.logout())},[t]),v=[Object(m.useMemo)(function(){return T.a.createElement(Oa,{disabled:c,onLogin:p})},[c,p]),Object(m.useMemo)(function(){return T.a.createElement(_a,{disabled:o,onRegister:g})},[g,o])];return T.a.createElement(wn.Fade,{show:n},T.a.createElement("div",{className:"AccountManager",onClick:E,style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:"0",left:"0",height:"100%",width:"100%",zIndex:"3000",boxSizing:"border-box",padding:"0 50px",backgroundColor:"rgba(0, 0, 0, 0.25)"}},T.a.createElement(ba.a,{onClick:lt},a?T.a.createElement(T.a.Fragment,null,T.a.createElement(Ia,{$userInfo:r}),T.a.createElement(h.a,{fullWidth:!0,variant:"outlined",onClick:b},"\u9000\u51fa")):T.a.createElement(T.a.Fragment,null,T.a.createElement(va.a,{value:s,indicatorColor:"primary",textColor:"primary",onChange:k,centered:!0},T.a.createElement(Ca.a,{label:"\u767b\u5f55"}),T.a.createElement(Ca.a,{label:"\u6ce8\u518c"})),T.a.createElement("div",null,v[s])))))}wa.defaultProps={$userInfo:null};var Ra,Na=Object(p.b)(function(e){return{showAccountManager:e.getIn(["global","showAccountManager"]),hasLogin:e.getIn(["user","hasLogin"]),isLogining:e.getIn(["user","isLogining"]),isRegistering:e.getIn(["user","isRegistering"]),$userInfo:e.getIn(["user","userInfo"])}},null)(wa),Fa=n(61),xa=n(112),Ka=n.n(xa),Ma=n(113),La=n.n(Ma),Ga=n(111),Ua=n.n(Ga),Da=n(5),$a=n.n(Da),Pa=n(222),Ba=n(223),Ha="success",Wa="error",za=(Ra={},Object(Fa.a)(Ra,Ha,ze),Object(Fa.a)(Ra,Wa,"#f44336"),Object(Fa.a)(Ra,"warn","#fdd835"),Ra);var Ja=T.a.forwardRef(function(e,t){var n=e.type,a=e.title,r=e.style,c=e.subtitle,u={borderRadius:"50%",overflow:"hidden",color:"#fff",width:"48px",height:"48px",backgroundColor:za[n]},o=T.a.createElement(Ua.a,{style:u});return n===Wa&&(o=T.a.createElement(Ka.a,{style:u})),n===Ha&&(o=T.a.createElement(La.a,{style:u})),T.a.createElement(Pa.a,{ref:t,style:r},T.a.createElement(Ba.a,{avatar:o,title:a,subheader:c}))});Ja.types={SUCCESS:Ha,ERROR:Wa,WARN:"warn"},Ja.propTypes={type:$a.a.oneOf(["warn",Wa,Ha]),title:$a.a.node.isRequired,subtitle:$a.a.node,style:$a.a.objectOf($a.a.oneOfType([$a.a.string,$a.a.number]))},Ja.defaultProps={type:"none",subtitle:null,style:void 0};var Va=Ja;function Ya(e){var t=e.$notifications;return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"NotificationsPanelContainer",style:{position:"absolute",top:"0",left:"0",width:"100%",zIndex:"4000",boxSizing:"border-box",padding:"0 20px"}},T.a.createElement(wn.TransitionGroup,null,t.map(function(e){var t=e.title,n=e.key,a=e.detail,r=void 0===a?null:a,c=e.type,u=void 0===c?"warn":c;return T.a.createElement(wn.Zoom,{key:n},T.a.createElement(Va,{style:{marginTop:"20px"},type:u,title:t,subtitle:r}))}))))}Ya.defaultProps={};var qa=Object(p.b)(function(e){return{$notifications:e.getIn(["global","notifications"])}},null)(Ya);var Xa=function(){return T.a.createElement("div",{style:{position:"relative",height:"100vh",display:"flex",flexFlow:"column nowrap"}},T.a.createElement("div",{style:{position:"relative",flex:"1",overflowY:"scroll",overflowX:"hidden"}},T.a.createElement(b.d,null,T.a.createElement(b.b,{path:"/todo/:id",component:aa}),T.a.createElement(b.b,{path:"/edit/:id",component:ga}),T.a.createElement(b.b,{component:Ea}))),T.a.createElement(qa,null),T.a.createElement(vn,null),T.a.createElement(Yn,null),T.a.createElement(Na,null))};function Za(e){var t=e.children,n=e.dispatch,a=e.hasLogin;return Object(m.useEffect)(function(){var e=ft();""!==e&&null!=e&&n(f.effectGetUserInfo())},[n]),Object(m.useEffect)(function(){a&&n(r.effectGetTaskList())},[n,a]),T.a.createElement(T.a.Fragment,null,t)}Za.propTypes={hasLogin:$a.a.bool.isRequired,children:$a.a.node.isRequired,dispatch:$a.a.func.isRequired};var Qa=Object(p.b)(function(e){return{hasLogin:e.getIn(["user","hasLogin"])}},null)(Za);var er=function(){return T.a.createElement(p.a,{store:sn},T.a.createElement(Qa,null,T.a.createElement(g.a,null,T.a.createElement(b.b,{path:"/",component:Xa}))))};n(169);k.a.render(T.a.createElement(er),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.66c9015e.chunk.js.map