(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(e,t,n){e.exports=n(248)},247:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"CHANGE_TASKS",function(){return I}),n.d(a,"ADD_TASK_TO_TASKS",function(){return w}),n.d(a,"REMOVE_TASK_IN_TASKS",function(){return A}),n.d(a,"CHANGE_CURRENT_TODO_TASK",function(){return R}),n.d(a,"CHANGE_CURRENT_TODO_TASK_BY_ID",function(){return N}),n.d(a,"CHECK_TASK_ITEM_IN_TASK_ITEMS_BY_TASK_ID",function(){return x}),n.d(a,"TOGGLE_TASK_ITEM_CHECKED",function(){return F}),n.d(a,"UPDATE_TASK_IN_TASKS",function(){return M}),n.d(a,"EFFECT_GET_TASK_LIST",function(){return K}),n.d(a,"EFFECT_DELETE_TASK",function(){return L}),n.d(a,"EFFECT_GET_TASK",function(){return U});var r={};n.r(r),n.d(r,"changeTasks",function(){return D}),n.d(r,"addTaskToTasks",function(){return G}),n.d(r,"removeTaskInTasks",function(){return $}),n.d(r,"changeCurrentTodoTask",function(){return P}),n.d(r,"changeCurrentTodoTaskById",function(){return B}),n.d(r,"checkTaskItemInTaskItemsByTaskId",function(){return H}),n.d(r,"toggleTaskItemPropChecked",function(){return W}),n.d(r,"updateTaskInTasks",function(){return z}),n.d(r,"effectGetTaskList",function(){return J}),n.d(r,"effectDeleteTask",function(){return V}),n.d(r,"effectGetTask",function(){return Y});var c={};n.r(c),n.d(c,"SHOW_SIDE_MENU",function(){return q}),n.d(c,"HIDE_SIDE_MENU",function(){return X}),n.d(c,"SHOW_ACCOUNT_MANAGER",function(){return Z}),n.d(c,"HIDE_ACCOUNT_MANAGER",function(){return Q}),n.d(c,"ADD_ONE_NOTIFICATION",function(){return ee}),n.d(c,"REMOVE_THE_TOP_NOTIFICATION",function(){return te});var o={};n.r(o),n.d(o,"showSideMenu",function(){return ne}),n.d(o,"hideSideMenu",function(){return ae}),n.d(o,"showAccountManager",function(){return re}),n.d(o,"hideAccountManager",function(){return ce}),n.d(o,"addOneNitification",function(){return oe}),n.d(o,"removeTheTopNitification",function(){return ue});var u={};n.r(u),n.d(u,"CHANGE_CURRENT_TASK",function(){return ie}),n.d(u,"ADD_TASK_ITEM_IN_CURRENT_TASK",function(){return se}),n.d(u,"REMOVE_TASK_ITEM_IN_CURRENT_TASK",function(){return le}),n.d(u,"SNAPSHOT_CURRENT_TASK",function(){return de}),n.d(u,"UNDO_CURRENT_TASK",function(){return fe}),n.d(u,"REDO_CURRENT_TASK",function(){return ke}),n.d(u,"CLEAR_FUTURE_TASKS",function(){return Ee}),n.d(u,"CLEAR_EDITNG_HISTORY",function(){return Te}),n.d(u,"EFFECT_UPDATE_TASK",function(){return me}),n.d(u,"EFFECT_GET_TASK",function(){return pe});var i={};n.r(i),n.d(i,"changeCurrentTask",function(){return be}),n.d(i,"addTaskItemInCurrentTask",function(){return ge}),n.d(i,"removeTaskItemInCurrentTask",function(){return ve}),n.d(i,"undoCurrentTask",function(){return he}),n.d(i,"redoCurrentTask",function(){return Oe}),n.d(i,"snapshotCurrentTask",function(){return Ce}),n.d(i,"clearFutureTasks",function(){return ye}),n.d(i,"clearAllEdtingHistory",function(){return _e}),n.d(i,"effectUpdateTask",function(){return je}),n.d(i,"effectGetTask",function(){return Se});var s={};n.r(s),n.d(s,"EFFECT_CREATE_TASK",function(){return Ie}),n.d(s,"EFFECT_UPDATE_TASK",function(){return we});var l={};n.r(l),n.d(l,"createTask",function(){return Ae}),n.d(l,"updateTask",function(){return Re});var d={};n.r(d),n.d(d,"LOGIN_SUCCESS",function(){return Ne}),n.d(d,"LOGIN_FAIL",function(){return xe}),n.d(d,"LOGOUT",function(){return Fe}),n.d(d,"REGISTER_SUCCESS",function(){return Me}),n.d(d,"REGISTER_FAIL",function(){return Ke}),n.d(d,"EFFECT_GET_USERINFO",function(){return Le}),n.d(d,"EFFECT_LOGIN",function(){return Ue}),n.d(d,"EFFECT_REGISTER",function(){return De});var f={};n.r(f),n.d(f,"loginSuccess",function(){return Ge}),n.d(f,"loginFail",function(){return $e}),n.d(f,"logout",function(){return Pe}),n.d(f,"registerSuccess",function(){return Be}),n.d(f,"registerFail",function(){return He}),n.d(f,"effectGetUserInfo",function(){return We}),n.d(f,"effectLogin",function(){return ze}),n.d(f,"effectRegister",function(){return Je});var k=n(15),E=n.n(k),T=n(0),m=n.n(T),p=n(17),b=n(54),g=n(48),v=n(288),h=n(289),O=n(285),C=n(149),y=n.n(C),_=n(150),j=n.n(_),S=n(290),I="tasks/CHANGE_TASKS",w="tasks/ADD_TASK_TO_TASKS",A="tasks/REMOVE_TASK_IN_TASKS",R="tasks/CHANGE_CURRENT_TODO_TASK",N="tasks/CHANGE_CURRENT_TODO_TASK_BY_ID",x="tasks/CHECK_TASK_ITEM_IN_TASK_ITEMS_BY_TASK_ID",F="tasks/TOGGLE_TASK_ITEM_CHECKED",M="tasks/UPDATE_TASK_IN_TASKS",K="tasks/EFFECT_GET_TASK_LIST",L="tasks/EFFECT_DELETE_TASK",U="tasks/EFFECT_GET_TASK",D=function(e){return{type:I,payload:e}},G=function(e){return{type:w,payload:e}},$=function(e){return{type:A,payload:e}},P=function(e){return{type:R,payload:e}},B=function(e){return{type:N,payload:e}},H=function(e){return{type:x,payload:e}},W=function(e){return{type:F,payload:e}},z=function(e){return{type:M,payload:e}},J=function(){return{type:K}},V=function(e){return{type:L,payload:e}},Y=function(e){return{type:U,payload:e}},q="global/SHOW_SIDE_MENU",X="global/HIDE_SIDE_MENU",Z="SHOW_ACCOUNT_MANAGER",Q="HIDE_ACCOUNT_MANAGER",ee="ADD_ONE_NOTIFICATION",te="REMOVE_THE_TOP_NOTIFICATION",ne=function(){return{type:q}},ae=function(){return{type:X}},re=function(){return{type:Z}},ce=function(){return{type:Q}},oe=function(e){return{type:ee,payload:e}},ue=function(){return{type:te}},ie="editingTask/CHANGE_CURRENT_TASK",se="editingTask/ADD_TASK_ITEM_IN_CURRENT_TASK",le="editingTask/REMOVE_TASK_ITEM_IN_CURRENT_TASK",de="editingTask/SNAPSHOT_CURRENT_TASK",fe="editingTask/UNDO_CURRENT_TASK",ke="editingTask/REDO_CURRENT_TASK",Ee="editingTask/CLEAR_FUTURE_TASKS",Te="editingTask/CLEAR_EDITNG_HISTORY",me="editingtask/EFFECT_UPDATE_TASK",pe="editingTask/EFFECT_GET_TASK",be=function(e){return{type:ie,payload:e}},ge=function(e){return{type:se,payload:e}},ve=function(e){return{type:le,payload:e}},he=function(){return{type:fe}},Oe=function(){return{type:ke}},Ce=function(){return{type:de}},ye=function(){return{type:Ee}},_e=function(){return{type:Te}},je=function(e){return{type:me,payload:e}},Se=function(e){return{type:pe,payload:e}},Ie="EFFECT_CREATE_TASK",we="EFFECT_UPDATE_TASK",Ae=function(e){return{type:Ie,payload:e}},Re=function(e){return{type:we,payload:e}},Ne="LOGIN_SUCCESS",xe="LOGIN_FAIL",Fe="LOGOUT",Me="REGISTER_SUCCESS",Ke="REGISTER_FAIL",Le="EFFECT_GET_USERINFO",Ue="EFFECT_LOGIN",De="EFFECT_REGISTER",Ge=function(e){return{type:Ne,payload:e}},$e=function(e){return{type:xe,payload:e}},Pe=function(){return{type:Fe}},Be=function(e){return{type:Me,payload:e}},He=function(e){return{type:Ke,payload:e}},We=function(){return{type:Le}},ze=function(e){return{type:Ue,payload:e}},Je=function(e){return{type:De,payload:e}},Ve="#43a047",Ye="#ff5722",qe=n(10),Xe=function(e){var t,n,a=e.$task,c=e.$tasksItemsEntity,o=e.$tasksItemsRefs,u=e.dispatch,i=e.history,s=Object(T.useMemo)(function(){return o.filter(function(e){return!c.getIn([e,"checked"])}).map(function(e){return c.get(e)})},[c,o]),l=o.size,d=l-s.size,f=l===d,k=0===l,E=Object(T.useCallback)(function(){k?i.push("/edit/".concat(a.get("id"))):f?i.push("/"):u(r.checkTaskItemInTaskItemsByTaskId(s.getIn(["0","id"])))},[a,k,f,s,i,u]);return k?(t="\u6dfb\u52a0\u4efb\u52a1\u9879",n="#f44336"):f?(t="\u5168\u90e8\u5b8c\u6210(".concat(d,"/").concat(l,")"),n=Ve):(t="\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1\u9879(".concat(d,"/").concat(l,")"),n=Ye),m.a.createElement(O.a,{style:{flex:"1",backgroundColor:n,color:"#fff",transition:"background-color 300ms"},size:"medium","aria-label":"add",onClick:E},t)};Xe.defaultProps={$tasksItemsRefs:new qe.List,$tasksItemsEntity:new qe.Map,$task:null};var Ze=Object(p.b)(function(e){var t=e.get("task");return{$tasksItemsEntity:t.getIn(["currentTodoTask","items","entity"]),$tasksItemsRefs:t.getIn(["currentTodoTask","items","refs"]),$task:t.get("currentTodoTask")}},null)(Xe),Qe=n(287),et=Object(p.b)(function(e){var t=e.get("editingTask");return{$futureTasks:t.get("futureTasks"),$oldTasks:t.get("oldTasks")}},null)(Object(g.g)(function(e){var t=e.$futureTasks,n=e.$oldTasks,a=e.dispatch,r=0===n.size,c=0===t.size,o=Object(T.useCallback)(function(){a(i.undoCurrentTask())},[a]),u=Object(T.useCallback)(function(){a(i.redoCurrentTask())},[a]);return m.a.createElement(Qe.a,{fullWidth:!0,variant:"outlined"},m.a.createElement(O.a,{onClick:o,disabled:r},"Undo"),m.a.createElement(O.a,{onClick:u,disabled:c},"Redo"))})),tt=function(e){var t=e.onClick;return m.a.createElement(O.a,{style:{backgroundColor:"#2196f3",color:"#fff"},size:"medium",fullWidth:!0,color:"primary","aria-label":"add",onClick:t},"\u5f00\u59cb\u4e00\u9879\u4efb\u52a1")};function nt(e){var t=e.dispatch,n=e.history,a=Object(T.useCallback)(function(){t(ne())},[t]),r=Object(T.useCallback)(function(){t(ne())},[t]),c=Object(T.useCallback)(function(){n.push("/")},[n]);return m.a.createElement(v.a,{style:{backgroundColor:"white",flex:"0 0 60px"},position:"static"},m.a.createElement(h.a,null,m.a.createElement(S.a,{edge:"start",onClick:a},m.a.createElement(y.a,null)),m.a.createElement(g.d,null,m.a.createElement(g.b,{path:"/edit/:id",component:et}),m.a.createElement(g.b,{path:"/todo",component:Ze}),m.a.createElement(g.b,{render:function(){return m.a.createElement(tt,{onClick:r})}})),m.a.createElement(S.a,{onClick:c,edge:"end"},m.a.createElement(j.a,null))))}nt.defaultProps={};var at=Object(p.b)(function(e){return{$currentTaskItems:e.getIn(["global","$currentTask","$items"])}},null)(Object(g.g)(nt)),rt=n(16),ct=n(87),ot=n.n(ct),ut=n(152),it=n.n(ut),st=n(294),lt=n(295),dt=n(49),ft=n(305),kt=n(296),Et=n(292),Tt=n(291);function mt(e){var t=e.title,n=e.children,a=""===t?null:m.a.createElement(Tt.a,{component:"div",id:"nested-list-subheader"},t);return m.a.createElement("div",null,m.a.createElement(Et.a,{style:{width:"100%"},component:"nav",subheader:a},n))}mt.defaultProps={title:"",children:m.a.createElement("div",null,"default props")};var pt=mt,bt=n(293),gt=n(28),vt=n(151),ht=n(114),Ot=n(117),Ct=n(115),yt=n(118),_t=function(e){function t(){return Object(ht.a)(this,t),Object(Ot.a)(this,Object(Ct.a)(t).apply(this,arguments))}return Object(yt.a)(t,e),t}(m.a.Component);var jt=function(e){var t=function(t){function n(e){var t;Object(ht.a)(this,n),(t=Object(Ot.a)(this,Object(Ct.a)(n).call(this,e))).state={show:!1};var a=t.props.timeout,r=void 0===a?null:a;if(null==r)throw new Error("\u4f60\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u5e26\u6709\u5c5e\u6027timeout\u7684\u7ec4\u4ef6\u6765enhance");return t.timeout=r,t}return Object(yt.a)(n,t),Object(vt.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.show;this.setState({show:e})}},{key:"componentWillReceiveProps",value:function(e){var t=e.show;this.setState({show:t})}},{key:"render",value:function(){var t=this.props,n=(t.show,t.children),a=t.timeout,r=Object(gt.a)(t,["show","children","timeout"]),c=this.state.show;return m.a.createElement(e,Object.assign({},r,{timeout:a,in:c}),m.a.Children.only(n))}}]),n}(_t);return t.defaultProps={timeout:300,show:!1},t},St=jt(bt.a);function It(e){var t=Object(T.useRef)(null),n=Object(T.useRef)(new Set),a=Object(T.useRef)(new Map),r=e.children,c=[];m.a.Children.forEach(r,function(e){var t=e.key,n=void 0===t?null:t;if(null==n)throw new Error("\u7ec4\u4ef6\u5fc5\u987b\u8981\u6709\u4e00\u4e2akey\u5c5e\u6027");c.push(n),a.current.set(n,m.a.cloneElement(e,{show:!0}))});var o=Object(T.useState)(c),u=Object(rt.a)(o,2),i=u[0],s=u[1],l=Object(T.useMemo)(function(){var e=t.current;return null!=e&&(e.length!==c.length||!c.every(function(t,n){return t===e[n]}))},[c]);return Object(T.useEffect)(function(){if(null==t.current&&(t.current=c),l){var e=n.current,r=t.current,o=r.filter(function(t){return!e.has(t)&&!c.includes(t)}),u=i.slice();c.forEach(function(t,n){!e.has(t)&&!r.includes(t)&&u.splice(n,0,t)}),o.forEach(function(t){e.add(t);var n=a.current,r=n.get(t),c=m.a.cloneElement(r,{show:!1,ref:function(t){if(null!=t){if(null==t.timeout)throw new Error("\u88ab\u5305\u88f9\u7684Transtion\u7ec4\u4ef6\u6ca1\u6709\u63d0\u4f9btimeout\u5c5e\u6027\uff0cTransitionGroup\u7ec4\u4ef6\u9700\u8981\u8fd9\u4e2a\u5c5e\u6027\u6765\u5224\u65ad\u4f55\u65f6\u5220\u9664\u5bf9\u5e94\u7684\u7ec4\u4ef6");setTimeout(function(){e.delete(c.key),n.delete(c.key),s(function(e){return e.filter(function(e){return e!==c.key})})},t.timeout)}}});n.set(t,c)}),s(u),t.current=c}},[c,i,l]),m.a.createElement(m.a.Fragment,null,i.map(function(e){return a.current.get(e)}))}It.propTypes={children:function(e,t,n){var a=e[t];m.a.Children.forEach(a,function(e){if(Object.getPrototypeOf(e.type)!==_t)throw Error("".concat(n,"\u7684\u5b50\u5143\u7d20\u5fc5\u987b\u662f\u7ecf\u8fc7transitionEnhancer\u7684\u81ea\u5b9a\u4e49\u52a8\u753b\u7ec4\u4ef6\uff0c\u6216\u662f\u81ea\u5e26\u7684\u52a8\u753b\u7ec4\u4ef6\uff0c \u5374\u5f97\u5230\u4e86").concat(e.constructor))})}},It.defaultProps={children:null};var wt=It,At=function(e){var t=e.$task,n=e.onClickTask,a=e.onClickEditTaskButton,r=e.onClickRemoveTaskButton,c=e.isEditable;return m.a.createElement(St,{timeout:300,key:t.get("id")},m.a.createElement(st.a,{style:{height:"48px"},onClick:function(){return n(t)},button:!c},m.a.createElement(lt.a,{primary:t.get("title")}),c?m.a.createElement(m.a.Fragment,null,m.a.createElement(S.a,{onClick:function(e){return a(e,t)}},m.a.createElement(it.a,null)),m.a.createElement(S.a,{onClick:function(e){return r(e,t)}},m.a.createElement(ot.a,null))):null))};function Rt(e){var t=e.onClickTask,n=e.onClickEditTaskButton,a=e.onClickRemoveTaskButton,r=e.$tasks,c=e.isEditable,o=e.onClickSwitchButton,u=Object(T.useCallback)(function(e){return function(t){t.stopPropagation();for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.apply(void 0,a)}},[]),i=m.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},m.a.createElement("div",{className:"left"},m.a.createElement(dt.a,null,"\u4efb\u52a1\u5217\u8868")),m.a.createElement("div",{className:"right"},m.a.createElement(dt.a,null,"\u7f16\u8f91",m.a.createElement(ft.a,{onClick:o,checked:c,color:"primary"}))));return m.a.createElement(pt,{title:i},m.a.createElement(kt.a,null),m.a.createElement(wt,null,r.map(function(e){return At({$task:e,isEditable:c,onClickTask:t,onClickRemoveTaskButton:u(a),onClickEditTaskButton:u(n)})})))}Rt.defaultProps={onClickTask:function(){console.log("onClickTask")},onClickRemoveTaskButton:function(){console.log("onClickRemoveTaskButton")},onClickEditTaskButton:function(){console.log("onClickEditTaskButton")},onClickSwitchButton:function(){console.log("onClickSwitchButton")},isEditable:!1};var Nt=Rt,xt=n(34),Ft=n(166),Mt=n(153),Kt=Object(qe.fromJS)({showSideMenu:!1,showAccountManager:!1,notifications:[]}),Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: ".concat(t," does not has type!"));switch(t.type){case q:return e.set("showSideMenu",!0);case X:return e.set("showSideMenu",!1);case Z:return e.set("showAccountManager",!0);case Q:return e.set("showAccountManager",!1);case ee:var o=c;return e.set("notifications",e.get("notifications").push(o));case te:return e.set("notifications",e.get("notifications").shift());default:return e}},Ut=function(){var e=-1,t=Date.now().toString();return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e+=1;var a="".concat(String(Math.round(1e8*Math.random())),"-").concat(String(Math.round(1e8*Math.random()))),r="".concat(a,"-").concat(t,"-").concat(e);return 0===n.length?r:"".concat(n,"-").concat(r)}}();function Dt(e){return function(t){t.stopPropagation();for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return e.apply(void 0,a)}}function Gt(e){e.stopPropagation()}function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entity",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a={},r={},c=[];return a[t]=r,a.refs=c,e.forEach(function(e){var t=e[n];c.push(t),r[t]=e}),a}function Pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entity",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"refs";return e[n].map(function(n){return e[t][n]})}function Bt(){return localStorage.getItem("__jwt")||""}function Ht(e){localStorage.setItem("__jwt",e)}var Wt,zt=Object(qe.fromJS)({tasks:$t([]),currentTodoTask:null}),Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: {action} does not has type!");var o=e.get("tasks"),u=e.getIn(["tasks","entity"]),i=e.getIn(["tasks","refs"]);switch(t.type){case I:var s=c;return e.set("tasks",s);case w:var l=t.payload,f=l.get("id");return e.set("tasks",o.merge({entity:u.set(f,l),refs:i.push(f)}));case A:var k=c.get("id");return e.set("tasks",o.merge({entity:u.delete(k),refs:i.filter(function(e){return e!==k})}));case R:var E=c;return e.set("currentTodoTask",E);case N:var T=c;return e.set("currentTodoTask",e.getIn(["tasks","entity",T]));case F:var m=["currentTodoTask","items","entity",c.get("id"),"checked"];return e.setIn(m,!e.getIn(m));case x:var p=c;return e.setIn(["currentTodoTask","items","entity",p,"checked"],!0);case M:var b=c,g=b.get("id");return e.setIn(["tasks","entity",g],b);case d.LOGOUT:return e.set("tasks",e.get("tasks").merge({entity:u.clear(),refs:i.clear()}));default:return e}},Vt=Object(qe.fromJS)({currentTask:null,futureTasks:[],oldTasks:[]}),Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: {action} does not has type!");var o=e.getIn(["currentTask","items"]),u=e.getIn(["currentTask","items","entity"]),i=e.getIn(["currentTask","items","refs"]);switch(t.type){case ie:var s=c;return e.set("currentTask",s);case se:var l=c,d=l.get("id");return e.setIn(["currentTask","items"],o.merge({entity:u.set(d,l),refs:i.push(d)}));case le:var f=c.get("id");return e.setIn(["currentTask","items"],o.merge({entity:u.delete(f),refs:i.filter(function(e){return e!==f})}));case fe:var k=e.get("oldTasks");if(0!==k.length){var E=e.get("futureTasks"),T=e.get("currentTask"),m=k.last();return e.merge({currentTask:m,futureTasks:E.push(T),oldTasks:k.pop()})}return e;case ke:var p=e.get("futureTasks");if(0!==p.length){var b=e.get("oldTasks"),g=e.get("currentTask"),v=p.last();return e.merge({currentTask:v,futureTasks:p.pop(),oldTasks:b.push(g)})}return e;case de:var h=e.get("currentTask");if(null!=h){var O=e.get("oldTasks");return e.set("oldTasks",O.push(h))}return e;case Ee:return e.set("futureTasks",e.get("futureTasks").clear());case Te:return e.merge({futureTasks:e.get("futureTasks").clear(),oldTasks:e.get("oldTasks").clear()});default:return e}},qt=Object(qe.fromJS)({hasLogin:!1,userInfo:null,isLogining:!1,isRegistering:!1}),Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=void 0===n?null:n,r=t.payload,c=void 0===r?null:r;if(null==a)throw new Error("action: ".concat(t," does not has type!"));switch(t.type){case Ue:return e.set("isLogining",!0);case De:return e.set("isRegistering",!0);case Ne:var o=c;return e.merge({hasLogin:!0,isLogining:!1},o);case xe:return e.set("isLogining",!1);case Fe:return Ht(""),e.merge({hasLogin:!1,userInfo:null,isLogining:!1,isRegistering:!1});case Me:var u=c;return e.merge({hasLogin:!0,isRegistering:!1},u);case Ke:return e.set("isRegistering",!1);default:return e}},Zt=Object(Mt.combineReducers)({global:Lt,task:Jt,editingTask:Yt,user:Xt}),Qt=n(75),en=n(14),tn=n.n(en),nn=n(27),an=n(8),rn=n(154),cn=n.n(rn),on=(Wt=location.host,function(){return["localhost","127.0.0.1"].some(function(e){return Wt.includes(e)})});var un=cn.a.create({baseURL:on()?"http://localhost:3031/":"http://101.37.174.138/",timeout:1e3});un.interceptors.request.use(function(e){var t=Bt();if(""===t||null==t)return e;var n=e;return n.headers.Authorization="Bearer ".concat(t),n},function(e){return Promise.reject(e)}),un.interceptors.response.use(function(e){return e},function(e){var t=e.response.data;return t.type="error",t.key=Ut("error"),Promise.reject(t)});var sn=tn.a.mark(fn),ln=tn.a.mark(kn),dn=tn.a.mark(En);function fn(){var e,t;return tn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(an.b)(un.get,"/users");case 3:return e=n.sent,t=e.data,n.next=7,Object(an.c)(f.loginSuccess({userInfo:Object(qe.fromJS)(t)}));case 7:n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),Ht("");case 13:case"end":return n.stop()}},sn,null,[[0,9]])}function kn(e){var t,n,a,r,c,u,i;return tn.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.payload,s.next=4,Object(an.b)(un.post,"/users/login",t);case 4:return n=s.sent,a=n.data,r=a.user,c=void 0===r?null:r,u=a.token,i=Object(gt.a)(a,["user","token"]),Ht(u),s.next=10,Object(an.c)(f.loginSuccess(Object(qe.fromJS)(Object(nn.a)({token:u,userInfo:c},i))));case 10:return s.next=12,Object(an.c)(o.addOneNitification({type:"success",title:"\u767b\u9646\u6210\u529f",key:Ut("notifi")}));case 12:s.next=20;break;case 14:return s.prev=14,s.t0=s.catch(0),s.next=18,Object(an.c)(f.loginFail());case 18:return s.next=20,Object(an.c)(o.addOneNitification(s.t0));case 20:case"end":return s.stop()}},ln,null,[[0,14]])}function En(e){var t,n,a,r,c,u,i;return tn.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.payload,s.next=4,Object(an.b)(un.post,"/users",t);case 4:return n=s.sent,a=n.data,r=a.user,c=void 0===r?null:r,u=a.token,i=Object(gt.a)(a,["user","token"]),Ht(u),s.next=10,Object(an.c)(f.registerSuccess(Object(qe.fromJS)(Object(nn.a)({token:u,userInfo:c},i))));case 10:return s.next=12,Object(an.c)(o.addOneNitification({type:"success",title:"\u6ce8\u518c\u6210\u529f",message:"\u5df2\u7ecf\u4e3a\u60a8\u81ea\u52a8\u767b\u5f55\u5e94\u7528"}));case 12:s.next=20;break;case 14:return s.prev=14,s.t0=s.catch(0),s.next=18,Object(an.c)(f.registerFail());case 18:return s.next=20,Object(an.c)(o.addOneNitification(s.t0));case 20:case"end":return s.stop()}},dn,null,[[0,14]])}var Tn=[Object(an.d)(d.EFFECT_GET_USERINFO,fn),Object(an.e)(d.EFFECT_REGISTER,En),Object(an.e)(d.EFFECT_LOGIN,kn)],mn=tn.a.mark(bn),pn=tn.a.mark(gn);function bn(e){var t,n,a,r,c;return tn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Object(an.b)(un.get,"/tasks/".concat(e));case 3:return t=u.sent,n=t.data,a=n.items,r=Object(gt.a)(n,["items"]),c=Object(qe.fromJS)(Object(nn.a)({},r,{items:$t(a)})),u.abrupt("return",c);case 10:return u.prev=10,u.t0=u.catch(0),u.next=14,Object(an.c)(o.addOneNitification(u.t0));case 14:return u.abrupt("return",null);case 15:case"end":return u.stop()}},mn,null,[[0,10]])}function gn(e){var t,n,a,r,c,u,i,s,l,d;return tn.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,t=e.toJS(),n=t.items,a=Object(gt.a)(t,["items"]),r=Object(nn.a)({},a,{items:Pt(n),timestamp:Date.now()}),f.next=5,Object(an.b)(un.put,"/tasks/".concat(r.id),r);case 5:return c=f.sent,u=c.data,i=u.items,s=Object(gt.a)(u,["items"]),l=Object(qe.fromJS)(Object(nn.a)({},s,{items:$t(i)})),f.abrupt("return",l);case 12:return f.prev=12,f.t0=f.catch(0),(d=f.t0.data).type="error",d.title="\u7f16\u8f91\u4efb\u52a1\u5931\u8d25",f.next=19,Object(an.c)(o.addOneNitification(d));case 19:return f.abrupt("return",null);case 20:case"end":return f.stop()}},pn,null,[[0,12]])}var vn=tn.a.mark(Cn),hn=tn.a.mark(yn),On=tn.a.mark(_n);function Cn(){var e,t,n;return tn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(an.b)(un.get,"/tasks");case 3:return e=a.sent,t=e.data,n=Object(qe.fromJS)($t(t.map(function(e){var t=e.items,n=Object(gt.a)(e,["items"]);return Object(nn.a)({},n,{items:Object(qe.fromJS)($t(t))})}))),a.next=8,Object(an.c)(r.changeTasks(n));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.error(a.t0);case 13:case"end":return a.stop()}},vn,null,[[0,10]])}function yn(e){var t;return tn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(an.b)(un.delete,"/tasks/".concat(t));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.error(n.t0);case 9:case"end":return n.stop()}},hn,null,[[1,6]])}function _n(e){var t,n;return tn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(an.b)(bn,t);case 3:if(null!=(n=a.sent)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(an.c)(r.changeCurrentTodoTask(n));case 8:return a.next=10,Object(an.c)(r.updateTaskInTasks(n));case 10:case"end":return a.stop()}},On)}var jn=[Object(an.d)(a.EFFECT_GET_TASK_LIST,Cn),Object(an.d)(a.EFFECT_DELETE_TASK,yn),Object(an.d)(a.EFFECT_GET_TASK,_n)],Sn=tn.a.mark(wn),In=tn.a.mark(An);function wn(e){var t,n;return tn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(an.b)(gn,t);case 3:if(null!=(n=a.sent)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(an.c)(r.updateTaskInTasks(n));case 8:case"end":return a.stop()}},Sn)}function An(e){var t,n;return tn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(an.b)(bn,t);case 3:if(null!=(n=a.sent)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(an.c)(i.changeCurrentTask(n));case 8:case"end":return a.stop()}},In)}var Rn=[Object(an.d)(u.EFFECT_UPDATE_TASK,wn),Object(an.d)(u.EFFECT_GET_TASK,An)],Nn=tn.a.mark(Fn),xn=function(e){return new Promise(function(t){return setTimeout(t,e)})};function Fn(){return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.b)(xn,3e3);case 2:return e.next=4,Object(an.c)(o.removeTheTopNitification());case 4:case"end":return e.stop()}},Nn)}var Mn=[Object(an.d)(c.ADD_ONE_NOTIFICATION,Fn)],Kn=tn.a.mark(Un),Ln=tn.a.mark(Dn);function Un(e){var t,n,a,c;return tn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,t=e.payload,u.next=4,Object(an.b)(un.post,"/tasks",t);case 4:return n=u.sent,a=n.data,c=a.items,u.next=9,Object(an.c)(r.addTaskToTasks(Object(qe.fromJS)(Object(nn.a)({},a,{items:$t(c)}))));case 9:u.next=16;break;case 11:return u.prev=11,u.t0=u.catch(0),console.error("createTask",u.t0),u.next=16,Object(an.c)(o.addOneNitification(u.t0));case 16:case"end":return u.stop()}},Kn,null,[[0,11]])}function Dn(){return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.d)(s.EFFECT_CREATE_TASK,Un);case 2:return e.next=4,Object(an.a)([].concat(Object(Qt.a)(Tn),Object(Qt.a)(jn),Object(Qt.a)(Rn),Object(Qt.a)(Mn)));case 4:case"end":return e.stop()}},Ln)}var Gn,$n=Dn,Pn=Object(Ft.a)(),Bn=[Pn],Hn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xt.c;on()?(console.log("\u6b63\u5904\u4e8edeveloment\u6a21\u5f0f"),Gn=Object(xt.d)(Zt,Hn(xt.a.apply(void 0,Bn)))):Gn=Object(xt.d)(Zt,xt.a.apply(void 0,Bn)),Pn.run($n);var Wn;Wn=Gn;var zn=Object(g.g)(Object(p.b)(function(e){var t=e.get("global"),n=e.get("task");return{showSideMenu:t.get("showSideMenu"),$tasks:n.get("tasks"),hasLogin:e.getIn(["user","hasLogin"])}},null)(function(e){var t=e.$tasks,n=e.dispatch,a=e.history,c=e.hasLogin,u=t.get("entity"),i=t.get("refs"),s=Object(T.useMemo)(function(){return i.map(function(e){return u.get(e)})},[u,i]),l=function(){var e=Object(T.useState)(navigator.onLine),t=Object(rt.a)(e,2),n=t[0],a=t[1],r=Object(T.useCallback)(function(){a(!0)},[]),c=Object(T.useCallback)(function(){a(!1)},[a]);return Object(T.useEffect)(function(){return window.addEventListener("online",r),window.addEventListener("offline",c),function(){window.removeEventListener("online",r),window.removeEventListener("offline",c)}},[a,r,c]),n}(),d=Object(T.useState)(!1),f=Object(rt.a)(d,2),k=f[0],E=f[1],p=Object(T.useCallback)(function(){l&&E(function(e){return!e})},[E,l]),b=Object(T.useCallback)(function(e){n(o.hideSideMenu()),a.push("/edit/".concat(e.get("id")))},[n,a]),g=Object(T.useCallback)(function(e){n(r.effectDeleteTask(e.get("id"))),n(r.removeTaskInTasks(e))},[n]),v=Object(T.useCallback)(function(e){k||(n(o.hideSideMenu()),a.push("/todo/".concat(e.get("id"))))},[n,a,k]);return m.a.createElement(Nt,{onClickEditTaskButton:b,onClickRemoveTaskButton:g,onClickTask:v,isEditable:l&&c&&k,onClickSwitchButton:p,$tasks:s})}));function Jn(e){var t=e.children;return m.a.createElement(pt,{title:"\u83dc\u5355\u9879"},m.a.createElement(kt.a,null),m.a.Children.map(t,function(e,t){return m.a.createElement(st.a,{key:t},e)}))}Jn.defaultProps={children:null};var Vn=Jn,Yn=n(303);function qn(e){var t=e.onEnter,n=Object(gt.a)(e,["onEnter"]),a=Object(T.useCallback)(function(e){var n=e.keyCode;13===(void 0===n?-1:n)&&t(e)},[t]);return m.a.createElement(Yn.a,Object.assign({onKeyUp:a},n))}qn.defaultProps={};var Xn=qn;var Zn=Object(p.b)(function(e){return{hasLogin:e.getIn(["user","hasLogin"])}},null)(function(e){var t=e.dispatch,n=e.hasLogin,a=Object(T.useState)(""),r=Object(rt.a)(a,2),c=r[0],u=r[1],i=Object(T.useCallback)(function(e){return u(e.target.value)},[u]),s=Object(T.useCallback)(function(e){var n=e.target.value.trim();if(""!==n){var a={title:n,id:Ut(),items:[],timestamp:Date.now()};t(l.createTask(a)),u("")}},[t,u]),d=Object(T.useCallback)(function(){t(o.hideSideMenu()),t(o.showAccountManager())},[t]);return m.a.createElement(Vn,null,m.a.createElement(Xn,{label:n?"\u521b\u5efa\u65b0\u4efb\u52a1":"\u8bf7\u5148\u767b\u5f55",disabled:!n,onEnter:s,onChange:i,type:"text",value:c,margin:"normal",variant:"outlined",fullWidth:!0}),m.a.createElement(O.a,{fullWidth:!0,variant:"outlined",style:{backgroundColor:n?Ve:Ye,color:"#fff"},onClick:d},n?"\u5df2\u767b\u5f55":"\u767b\u5f55|\u4e91\u540c\u6b65"))}),Qn=jt(n(298).a);function ea(e){var t=e.show,n=e.children;return m.a.createElement(Qn,{show:t,direction:"right"},m.a.createElement("div",{style:{position:"absolute",width:"65%",maxWidth:"375px",height:"100vh",backgroundColor:"#fff",overflowY:"scroll",overflowX:"hidden",opacity:"1",zIndex:"3000"},className:"transition-slide-right-self"},n))}ea.defaultProps={show:!0,children:""};var ta=ea;function na(e){var t=e.show,n=e.onClick;return m.a.createElement(St,{show:t},m.a.createElement("div",{onClick:n,role:"button",style:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)",top:"0",left:"0",height:"100vh",width:"100%",zIndex:"2000"},className:"transition-fade-self"}))}na.defaultProps={onClick:function(){console.log("Mask:onClick")}};var aa=na;var ra=Object(p.b)(function(e){return{showSideMenu:e.getIn(["global","showSideMenu"])}},null)(function(e){var t=e.dispatch,n=e.showSideMenu,a=Object(T.useCallback)(function(){t(ae())},[t]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(aa,{show:n,onClick:a}),m.a.createElement(ta,{show:n},m.a.createElement(zn,null),m.a.createElement(Zn,null)))});function ca(e){var t=e.message,n=e.time,a=Object(T.useState)(!1),r=Object(rt.a)(a,2),c=r[0],o=r[1],u=Object(T.useState)(0),i=Object(rt.a)(u,2),s=i[0],l=i[1];return Object(T.useEffect)(function(){var e=setTimeout(function(){o(!0)},n),t=setInterval(function(){l(function(e){return e+1})},1e3);return function(){clearTimeout(e),clearInterval(t)}},[n,o,l]),c?m.a.createElement(g.a,{to:"/"}):m.a.createElement("div",{style:{padding:"20px"}},m.a.createElement("h1",null,t),m.a.createElement("h2",null,Math.round(n/1e3)-s,"\u79d2\u540e\u56de\u5230\u4e3b\u9875"))}ca.defaultProps={message:"404 Not Found",time:3e3};var oa=ca,ua=n(297),ia=n(165);n(205);function sa(e){return m.a.createElement(ia.a,e)}sa.defaultProps={onClick:null,checked:!1,disabled:!1};var la=sa;function da(e){var t=e.$task,n=e.onCreateNewTaskItem,a=e.onClickRemoveButton,r=e.isEditable,c=e.onClickCheckbox,o=Object(T.useState)(""),u=Object(rt.a)(o,2),i=u[0],s=u[1],l=Object(T.useCallback)(function(e){s(e.target.value)},[]),d=Object(T.useCallback)(function(e){var t=e.keyCode,a=void 0===t?-1:t,r=e.target.value;0!==r.length&&13===a&&(n(Object(qe.Map)({id:Ut(),title:r,checked:!1})),s(""))},[s,n]);return m.a.createElement(Et.a,null,m.a.createElement(st.a,{dense:!0},m.a.createElement(dt.a,{variant:"h4",gutterBottom:!0},t.get("title"))),m.a.createElement(wt,null,t.getIn(["items","refs"]).map(function(e){var n=t.getIn(["items","entity",e]);return m.a.createElement(St,{key:n.get("id"),timeout:600},m.a.createElement("div",null,m.a.createElement(st.a,null,m.a.createElement(S.a,{onClick:function(){return c(n)}},m.a.createElement(la,{disabled:r,edge:"start",checked:n.get("checked")})),m.a.createElement(lt.a,{primary:n.get("title")}),r?m.a.createElement(S.a,{onClick:function(){return a(n)}},m.a.createElement(ot.a,null)):null),m.a.createElement(kt.a,{variant:"middle"})))})),r?m.a.createElement(st.a,null,m.a.createElement(ua.a,{value:i,onKeyUp:d,onChange:l,placeholder:"\u65b0\u589e\u5f85\u505a\u4e8b\u9879",fullWidth:!0})):null)}da.defaultProps={onCreateNewTaskItem:function(){console.log("onCreateNewTaskItem")},onClickRemoveButton:function(){console.log("onCreateNewTaskItem")},onClickCheckbox:function(){console.log("onClickCheckbox")},isEditable:!1};var fa=da;function ka(e){var t=e.match.params.id,n=e.$currentTodoTask,a=e.dispatch;Object(T.useEffect)(function(){return a(r.effectGetTask(t)),function(){a(r.changeCurrentTodoTask(null))}},[a,t]);var c=Object(T.useCallback)(function(e){a(r.toggleTaskItemPropChecked(e))},[a]);return null==n?m.a.createElement(oa,{message:"Loding...",time:5e3}):m.a.createElement(fa,{onClickCheckbox:c,$task:n,isEditable:!1})}ka.defaultProps={$currentTodoTask:null};var Ea=Object(p.b)(function(e){var t=e.get("global"),n=e.get("task");return{showSideMenu:t.get("showSideMenu"),$tasksEntity:n.getIn(["tasks","entity"]),$currentTodoTask:n.get("currentTodoTask")}},null)(ka),Ta=n(160),ma=n.n(Ta);function pa(e){var t=e.onClickTask,n=e.$tasks,a=e.onClickIconButton,r=Object(T.useMemo)(function(){return Dt(a)},[a]);return m.a.createElement(pt,{title:"\u7f6e\u9876\u4efb\u52a1"},m.a.createElement(kt.a,null),m.a.createElement(wt,null,n.map(function(e){return m.a.createElement(St,{show:!0,key:e.get("id"),timeout:300},m.a.createElement("div",null,m.a.createElement(st.a,{onClick:function(){return t(e)},button:!0},m.a.createElement(lt.a,{primary:e.get("title")}),m.a.createElement(S.a,{onClick:function(t){return r(t,e)}},m.a.createElement(ma.a,null)))))})))}pa.defaultProps={onClickTask:function(){console.log("onClickTask")},onClickIconButton:function(){console.log("onClickIconButton")}};var ba=pa,ga=n(161),va=n.n(ga);function ha(e){var t=e.onClickTask,n=e.$tasks,a=e.onClickIconButton,r=Object(T.useMemo)(function(){return Dt(a)},[a]);return m.a.createElement(pt,{title:"\u6700\u8fd1\u4efb\u52a1"},m.a.createElement(kt.a,null),n.map(function(e){return m.a.createElement(m.a.Fragment,{key:e.get("id")},m.a.createElement(st.a,{onClick:function(){return t(e)},button:!0},m.a.createElement(lt.a,{primary:e.get("title")}),e.get("isPinned")?null:m.a.createElement(S.a,{onClick:function(t){return r(t,e)}},m.a.createElement(va.a,null))))}))}ha.defaultProps={onClickTask:function(){console.log("onClickTask")},onClickIconButton:function(){console.log("onClickIconButton")}};var Oa=ha;function Ca(e){var t=e.$tasksRefs,n=e.dispatch,a=e.history,r=e.$tasksEntity,c=Object(T.useMemo)(function(){return t.map(function(e){return r.get(e)}).sort(function(e,t){var n=e.get("lastVisitTime")||0;return(t.get("lastVisitTime")||0)-n})},[t,r]),o=Object(T.useMemo)(function(){return t.map(function(e){return r.get(e)}).filter(function(e){return e.get("isPinned")})},[t,r]),u=Object(T.useCallback)(function(e){var t=e.set("isPinned",!0);n(i.effectUpdateTask(t))},[n]),s=Object(T.useCallback)(function(e){var t=e.set("isPinned",!1);n(i.effectUpdateTask(t))},[n]),l=Object(T.useCallback)(function(e){a.push("/todo/".concat(e.get("id")))},[a]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(ba,{onClickIconButton:s,onClickTask:l,$tasks:o}),m.a.createElement(Oa,{onClickIconButton:u,onClickTask:l,$tasks:c}))}Ca.defaultProps={};var ya=Object(p.b)(function(e){var t=e.get("task");return{$recentTaskIds:t.get("recentTaskIds"),$pinnedTaskIds:t.get("pinnedTaskIds"),$tasksEntity:t.getIn(["tasks","entity"]),$tasksRefs:t.getIn(["tasks","refs"])}},null)(Ca);function _a(e){var t=e.match.params.id,n=e.dispatch,a=e.$currentEditingTask,c=Object(T.useState)(!1),o=Object(rt.a)(c,2),u=o[0],s=o[1],l=Object(T.useState)(!1),d=Object(rt.a)(l,2),f=d[0],k=d[1];Object(T.useEffect)(function(){u||(n(i.effectGetTask(t)),null!=a&&s(!0))},[n,t,u,s,a]),Object(T.useEffect)(function(){return function(){n(i.clearAllEdtingHistory()),n(i.changeCurrentTask(null))}},[t,n]),Object(T.useEffect)(function(){u&&f&&(n(i.effectUpdateTask(a)),n(r.updateTaskInTasks(a)))},[u,f,n,a]);var E=Object(T.useCallback)(function(e){n(i.snapshotCurrentTask()),n(i.addTaskItemInCurrentTask(e)),n(i.clearFutureTasks()),k(!0)},[n]),p=Object(T.useCallback)(function(e){n(i.snapshotCurrentTask()),n(i.removeTaskItemInCurrentTask(e)),k(!0)},[n]);return null==a?m.a.createElement(oa,{message:"Loding..."}):m.a.createElement(fa,{onCreateNewTaskItem:E,onClickRemoveButton:p,$task:a,isEditable:!0})}_a.defaultProps={$currentEditingTask:null};var ja=Object(p.b)(function(e){var t=e.get("global"),n=e.get("task"),a=e.get("editingTask");return{showSideMenu:t.get("showSideMenu"),$tasksEntity:n.getIn(["tasks","entity"]),$currentEditingTask:a.get("currentTask")}},null)(_a),Sa=n(167),Ia=n(304),wa=n(299);function Aa(e){var t=m.a.useState(""),n=Object(rt.a)(t,2),a=n[0],r=n[1],c=m.a.useState(""),o=Object(rt.a)(c,2),u=o[0],i=o[1],s=Object(T.useCallback)(function(e){return r(e.target.value)},[r]),l=Object(T.useCallback)(function(e){return i(e.target.value)},[i]),d=e.onLogin,f=e.disabled,k=Object(T.useCallback)(function(){d({username:a,password:u})},[a,u,d]),E=f||""===a.trim()||""===u.trim(),p=f?"\u767b\u5f55\u4e2d...":"\u767b\u5f55";return m.a.createElement(Et.a,null,m.a.createElement(st.a,null,m.a.createElement(Yn.a,{value:a,onChange:s,type:"text",label:"\u7528\u6237\u540d",fullWidth:!0})),m.a.createElement(st.a,null,m.a.createElement(Xn,{onEnter:k,value:u,onChange:l,type:"password",label:"\u5bc6\u7801",fullWidth:!0})),m.a.createElement(st.a,null,m.a.createElement(O.a,{disabled:E,variant:"outlined",onClick:k,fullWidth:!0},p)))}Aa.defaultProps={disabled:!1};var Ra=Aa;function Na(e){var t=m.a.useState(""),n=Object(rt.a)(t,2),a=n[0],r=n[1],c=m.a.useState(""),o=Object(rt.a)(c,2),u=o[0],i=o[1],s=Object(T.useCallback)(function(e){return r(e.target.value)},[r]),l=Object(T.useCallback)(function(e){return i(e.target.value)},[i]),d=e.onRegister,f=e.disabled,k=Object(T.useCallback)(function(){d({username:a,password:u})},[a,u,d]),E=f||""===a.trim()||""===u.trim();return m.a.createElement(Et.a,null,m.a.createElement(st.a,null,m.a.createElement(Yn.a,{placeholder:"\u8bf7\u8f93\u51654\u523016\u4f4d\u5b57\u6bcd\uff0c\u6570\u5b57",value:a,onChange:s,type:"text",label:"\u7528\u6237\u540d",fullWidth:!0})),m.a.createElement(st.a,null,m.a.createElement(Xn,{onEnter:k,placeholder:"\u8bf7\u8f93\u51654\u523016\u4f4d\u5b57\u6bcd\uff0c\u6570\u5b57",value:u,onChange:l,type:"text",label:"\u5bc6\u7801",fullWidth:!0})),m.a.createElement(st.a,null,m.a.createElement(O.a,{disabled:E,variant:"outlined",onClick:k,fullWidth:!0},"\u6ce8\u518c")))}Na.defaultProps={disabled:!1};var xa=Na;function Fa(e){var t=e.$userInfo;return m.a.createElement(Et.a,null,m.a.createElement(st.a,null,"\u5df2\u7ecf\u767b\u5f55\uff0c\u6b22\u8fce\u60a8!"),m.a.createElement(st.a,null,"\u7528\u6237\u540d: ".concat(t.get("username"))))}Fa.defaultProps={};var Ma=Fa,Ka=/^[a-zA-Z0-9_-]{4,16}$/,La=/^[a-zA-Z0-9_-]{4,16}$/;function Ua(e){var t=e.dispatch,n=e.showAccountManager,a=e.hasLogin,r=e.$userInfo,c=e.isLogining,u=e.isRegistering,i=Object(T.useState)(0),s=Object(rt.a)(i,2),l=s[0],d=s[1],k=Object(T.useCallback)(function(){t(o.hideAccountManager())},[t]),E=Object(T.useCallback)(function(e,t){d(t)},[]),p=Object(T.useCallback)(function(e){var n=e.username,a=void 0===n?"":n,r=e.password,c=void 0===r?"":r;Ka.test(a)&&La.test(c)?t(f.effectLogin(e)):t(o.addOneNitification({type:"error",title:"\u767b\u5f55\u5931\u8d25",detail:"\u975e\u6cd5\u7528\u6237\u540d\u6216\u5bc6\u7801\uff0c\u8bf7\u8f93\u51654\u523016\u4f4d\u7684\u5b57\u6bcd\u6216\u6570\u5b57",key:Ut("notify")}))},[t]),b=Object(T.useCallback)(function(e){var n=e.username,a=void 0===n?"":n,r=e.password,c=void 0===r?"":r;Ka.test(a)&&La.test(c)?t(f.effectRegister(e)):t(o.addOneNitification({type:"error",title:"\u6ce8\u518c\u5931\u8d25",detail:"\u975e\u6cd5\u7528\u6237\u540d\u6216\u5bc6\u7801\uff0c\u8bf7\u8f93\u51654\u523016\u4f4d\u7684\u5b57\u6bcd\u6216\u6570\u5b57",key:Ut("notify")}))},[t]),g=Object(T.useCallback)(function(){t(f.logout())},[t]),v=[Object(T.useMemo)(function(){return m.a.createElement(Ra,{disabled:c,onLogin:p})},[c,p]),Object(T.useMemo)(function(){return m.a.createElement(xa,{disabled:u,onRegister:b})},[b,u])];return m.a.createElement(St,{show:n},m.a.createElement("div",{className:"AccountManager",onClick:k,style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:"0",left:"0",height:"100%",width:"100%",zIndex:"3000",boxSizing:"border-box",padding:"0 50px",backgroundColor:"rgba(0, 0, 0, 0.25)"}},m.a.createElement(Sa.a,{onClick:Gt},a?m.a.createElement(m.a.Fragment,null,m.a.createElement(Ma,{$userInfo:r}),m.a.createElement(O.a,{fullWidth:!0,variant:"outlined",onClick:g},"\u9000\u51fa")):m.a.createElement(m.a.Fragment,null,m.a.createElement(Ia.a,{value:l,indicatorColor:"primary",textColor:"primary",onChange:E,centered:!0},m.a.createElement(wa.a,{label:"\u767b\u5f55"}),m.a.createElement(wa.a,{label:"\u6ce8\u518c"})),m.a.createElement("div",null,v[l])))))}Ua.defaultProps={$userInfo:null};var Da,Ga=Object(p.b)(function(e){return{showAccountManager:e.getIn(["global","showAccountManager"]),hasLogin:e.getIn(["user","hasLogin"]),isLogining:e.getIn(["user","isLogining"]),isRegistering:e.getIn(["user","isRegistering"]),$userInfo:e.getIn(["user","userInfo"])}},null)(Ua),$a=n(68),Pa=n(163),Ba=n.n(Pa),Ha=n(164),Wa=n.n(Ha),za=n(162),Ja=n.n(za),Va=n(300),Ya=n(301),qa="success",Xa="error",Za=(Da={},Object($a.a)(Da,qa,Ve),Object($a.a)(Da,Xa,"#f44336"),Object($a.a)(Da,"warn","#fdd835"),Da);function Qa(e){var t=e.type,n=e.title,a=e.style,r=e.subtitle,c={borderRadius:"50%",overflow:"hidden",color:"#fff",width:"48px",height:"48px",backgroundColor:Za[t]},o=m.a.createElement(Ja.a,{style:c});return t===Xa&&(o=m.a.createElement(Ba.a,{style:c})),t===qa&&(o=m.a.createElement(Wa.a,{style:c})),m.a.createElement(Va.a,{style:a},m.a.createElement(Ya.a,{avatar:o,title:n,subheader:r}))}Qa.types={SUCCESS:qa,ERROR:Xa,WARN:"warn"},Qa.defaultProps={type:"none",subtitle:null,style:void 0};var er=Qa,tr=jt(n(302).a);function nr(e){var t=e.$notifications;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"NotificationsPanelContainer",style:{position:"absolute",top:"0",left:"0",width:"100%",zIndex:"4000",boxSizing:"border-box",padding:"0 20px"}},m.a.createElement(wt,null,t.map(function(e){var t=e.title,n=e.key,a=e.detail,r=void 0===a?null:a,c=e.type,o=void 0===c?"warn":c;return m.a.createElement(tr,{key:n},m.a.createElement(er,{style:{marginTop:"20px"},type:o,title:t,subtitle:r}))}))))}nr.defaultProps={};var ar=Object(p.b)(function(e){return{$notifications:e.getIn(["global","notifications"])}},null)(nr);var rr=function(){return m.a.createElement("div",{style:{position:"relative",height:"100vh",display:"flex",flexFlow:"column nowrap"}},m.a.createElement("div",{style:{position:"relative",flex:"1",overflowY:"scroll",overflowX:"hidden"}},m.a.createElement(g.d,null,m.a.createElement(g.b,{path:"/todo/:id",component:Ea}),m.a.createElement(g.b,{path:"/edit/:id",component:ja}),m.a.createElement(g.b,{component:ya}))),m.a.createElement(ar,null),m.a.createElement(at,null),m.a.createElement(ra,null),m.a.createElement(Ga,null))},cr=n(4),or=n.n(cr);function ur(e){var t=e.children,n=e.dispatch,a=e.hasLogin;return Object(T.useEffect)(function(){var e=Bt();""!==e&&null!=e&&n(f.effectGetUserInfo())},[n]),Object(T.useEffect)(function(){a&&n(r.effectGetTaskList())},[n,a]),m.a.createElement(m.a.Fragment,null,t)}ur.propTypes={hasLogin:or.a.bool.isRequired,children:or.a.node.isRequired,dispatch:or.a.func.isRequired};var ir=Object(p.b)(function(e){return{hasLogin:e.getIn(["user","hasLogin"])}},null)(ur);var sr=function(){return m.a.createElement(p.a,{store:Gn},m.a.createElement(ir,null,m.a.createElement(b.a,null,m.a.createElement(g.b,{path:"/",component:rr}))))};n(247);E.a.render(m.a.createElement(sr),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.d0aa63de.chunk.js.map